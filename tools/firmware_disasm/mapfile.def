#disassembly mapping description
# authors: jindroush, vasekp

#this is a memory map for newest known Albi firmware for Sonix SN95302 (ZC-p20115V01,20240530V023) from 2024
#publishing date of firmware: in fw 30.05.2024, on web 28.08.2024

#some Albi books were mentioned to have 'new' features
#Čeština hravě, Detektiv Vroubek
#
#this is what should be new in this firmware
#1) quiz answers in fixed order - this we have already confirmed
#2) pen should remember already clicked oids
#3) random sounds playing
#4) something about double touches on OIDs, not sure if I understood that.


#this documents Albi firmware, Sonix ROM and ABI used by the devtools (still unknown, the ZC-nnnnnVnn in rom version is suspected
#to be compiler signature

#firmware is loaded as block from 0x400000. On 0x400080 is module description which then copies part of the flash to PRAM.
#the PRAM, in disassembly starting from 0x4000, starts with interrupt vectors, first of them being started after reset
#it calls SysMain routine and then... magic. Don't forget that all addresses are WORD based.
#unfortunately, contents of 0x0000-0x3FFF ROM and 0x280000 ROM is unknown, only function headers are documented.

#the resulting disassembly is not a _pure_ disassembly, as it uses 'virtual' instructions.
#Such instructions are just common patterns created by assembler/compiler while using
#limited DSP instruction set. For example REG = 0xYYXX (ie. IMM16 mov instruction) which
#is usually encoded as two REG.L=0xXX, REG.H=0xYY instructions

#strings look like unicode at first, but they're mostly 8bit characters stored in WORD arrays. Chinese characters are encoded
#    by GBK encoding (multibyte). Strings are zero-terminated (C-style)
#
#the compiler used for firmware creation is simplistic, so all strings used as function parameters are stored without deduplication
#    (that means, that for example strings used for opening files like "r" or "r+" are stored many times in fw. Or they're not using
#    const or similar modifier.

# There is 'naming standard' for functions, not yet fully implemented:
# functions marked 'naked_' are using register passing for in-out. That's why it's important to note that, and to be clearly distinct
#  from stack-passed/function prologue functions
#
# other functions use ABI described below:
# - the parameters are passed on the stack, everything in WORDs, DWORDs as two WORDs, backwards (last parameter pushed first)
# - then functions FunctionPrologue with respective in-register parameters are called - see their prototypes below
# - stackframe is then constructed and parameters made accessible through registers this way:
#   fff4 .. arg9
#   fff5 .. arg8 -> X0
#   fff6 .. arg7 -> X1
#   fff7 .. arg6 -> Y0
#   fff8 .. arg5 -> Y1
#   fff9 .. arg4 -> R0
#   fffa .. arg3 -> R1
#   fffb .. arg2 -> MR0
#   fffc .. arg1 -> MR1
#   fffd .. return addr
#   fffe .. return addr
#   ffff .. previous DM[0x000]
#   0000 .. start of local variables <<< new DM[0x000] points here
#     Y0 .. saved DM[...] memory
#     ?? <- current Sp
# - just before Retff FunctionEpilogue is called, DM[...] values are restored, DM[0x000] is restored, Sp points to return address
# - value is returned in R0, or R1R0 pair (guessed, but so far nothing else seen)
# - stack is cleaned by the caller - by Pop, Pop Pop, functions naked_pop_n_words, or direct Sp manipulation when popping 9 params.
# - sometimes it also looks like the number of pushed word parameters is sent in Ix1 just before call. Not sure if this is always needed,
#    or only in variadic functions? (where it may make sense). Seen also in indirect function calls.
#    VP theory: it's a compiler artifact because the compiler 
#    can't prove whether the indirectly called fn is variadic or 
#    not, so passes its #args just in case; it does not cause any 
#    harm and can only help.


#hw notes (to be moved later to respective code section)
#led2 blinks blue when searching for bt
#led1 lights white when usb 5v connected
#led3,4,5,6 connected together, turned on on beginning

[MAPPING]

#order is important
loadfile sn95302.rom
loadfile update.chp	last:1

#this defines mapping of internal 'handles' to filename
outfile f_main	filename:firmware.asm
outfile f_cross	filename:crossref.txt
outfile f_calls	filename:calls.txt
#outfile f_callgraph	filename:callgraph.gexf
outfile f_sym	filename:symbols.txt

#this defines facility mapping, more than one facility can go to single handle
output dis	handle:f_main
output cross	handle:f_cross
output calls	handle:f_calls
output symbols	handle:f_sym
#output callgraph	handle:f_callgraph

##################################################################################
#this is content of first rom part (mapped to 0, 0x4000 words)
org 0x000000
asm 0x0024
word 1x	comment:SYSCONF or bits
word 1x
asm 0x0004
word 2x
asm 0x0004
word 2x
asm 0x0004
word 2x
asm 0x0004
word 2x
asm 0x0004
word 2x
asm 0x0004
word 2x

asm 14
word 1x
asm 4
word 2x
asm 4
word 2x
asm 4
word 2x

asm 2732
jumptable 6x	base:0x71

asm 3602
word 230x

asm 16

word 480x	comment:rom unpar1
word 17x	comment:rom unpar2
word 17x	comment:rom unpar3
word 40x	comment:rom unpar4
word 1962x	comment:rom unpar5

word 135x	comment:rom unpar6
word 72x	comment:rom unpar7

word 258x	comment:rom unpar8

word 506x	comment:rom unpar9
word 310x	comment:rom unpar10
word 419x	comment:rom unpar11


asm 10548
jumptable 7x	base:1

asm 4172
jumptable 8x	base:2

asm 0xa4c

##################################################################################
#this is content of second rom part (mapped to 0x280000, 0xc000 words)
org 0x280000

asm 28836
jumptable 8x	base:0x23

asm 4778
jumptable 14x

asm 3290
jumptable 8x	base:0x02

asm 11212
jumptable 10x

asm 2032
jumptable 6x

asm 29482
jumptable 4x

asm 5382
jumptable 4x

asm 12540

word 18x	comment:rom28 unpar1
word 9x	comment:rom28 unpar2

word 32x	comment:rom28 unpar3
word 32x	comment:rom28 unpar4

word 51x	comment:rom28 unpar5

pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x
pointer 1x
word 1x

pointer 1x
pointer 1x
pointer 1x

dword 8x

wbstr 8	sym:string_sd2
wbstr 10	sym:string_xrom
wbstr 6	sym:string_sd
wbstr 8	sym:string_ab+
wbstr 8	sym:string_wb+_2
wbstr 8
wbstr 6
wbstr 6
wbstr 6
wbstr 6
wbstr 6
wbstr 6
wbstr 4
wbstr 4
wbstr 4
wbstr 20
wbstr 14

word 12x
wbstr 4
wbstr 52

word 13x
str 8

##################################################################################
#content of firmware
org 0x400000

wbstr 0x18
wbstr 0x38
wbstr 0x38

dword 6x
pointer 1x	comment:beginning of part 2
pointer 1x	comment:end of part 2
pointer 1x	comment:beginning of part 3
pointer 1x	comment:end of part 3
dword 1x
pointer 1x	comment:points to textual version info

wbstr 0x16
asm 2
dword 3x
asm 0x24

#this is used for bootloader
str 8	comment:chip name, reversed

word 1x	comment:number of modules

#one module, 8 words
word 1x	comment:project ID(?) checked with &0x7f00
word 1x	comment:PRAM length in words
dword 1x	comment:PRAM src address in fw
dword 1x	comment:PRAM dst address
dword 1x	comment:sum of all PRAM words

asm 1254


#version
wbstr 0x34	comment:version	sym:ascii_version
#pointer to next table
pointer 1x
#string table and strings
skip 0xde2e

#from here is PRAM
org 0x4000

asm 0x604e

word 45x	comment:pram unpar1 
word 48x	comment:pram unpar2
word 12x	comment:pram unpar3
word 20x	comment:pram unpar4
word 4x	comment:pram unpar5
word 20x	comment:pram unpar6
word 4x	comment:pram unpar7

wbstr 0x6
wbstr 0x24
#end of PRAM is here

org 0x40a308

asm 0x182e
jumptable 8x	base:0xa

asm 0xf20
jumptable 13x	base:0x2d

asm 0xe4
jumptable 5x	base:0x2

asm 0x2F8
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.6

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.6

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.6

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.6

asm 0x4AE
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.6

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.6

asm 0x70
jumptable 6x	base:0x80	prefix:switch_on_oid_fwcode.6

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.6

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.6

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.6

asm 0xFBA
jumptable 75x	prefix:switch_on_penstate.6

asm 0xDE8
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.b

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.b

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.b

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.b

asm 0x882
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.b

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.b

asm 0x70
jumptable 22x	base:0x70	prefix:switch_on_oid_fwcode.b

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.b

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.b

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.b

asm 0x1A70
jumptable 75x	prefix:switch_on_penstate.b

asm 0xCC2
jumptable 13x	base:2

asm 0xDA
jumptable 13x	base:2

asm 0x640
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.1

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.1

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.1

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.1

asm 0x57C
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.1

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.1

asm 0x70
jumptable 22x	base:0x70	prefix:switch_on_oid_fwcode.1

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.1

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.1

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.1

asm 0x3E
jumptable 4x	base:0x501	prefix:switch_on_oid_fwcode.1

asm 0x10D6
jumptable 75x	prefix:switch_on_penstate.1

asm 0x119C
jumptable 21x	prefix:switch_on_quiz_state

asm 0x2E5A
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.8

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.8

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.8

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.8

asm 0x4AE
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.8

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.8

asm 0x70
jumptable 6x	base:0x80	prefix:switch_on_oid_fwcode.8

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.8

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.8

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.8

asm 0xF3E
jumptable 75x	prefix:switch_on_penstate.8

asm 0x10EC
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.2

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.2

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.2

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.2

asm 0x6FE
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.2

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.2

asm 0x70
jumptable 6x	base:0x80	prefix:switch_on_oid_fwcode.2

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.2

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.2

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.2

asm 0x10D8
jumptable 75x	prefix:switch_on_penstate.2

asm 0xD82
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.9

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.9

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.9

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.9

asm 0x4AE
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.9

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.9

asm 0x70
jumptable 6x	base:0x80	prefix:switch_on_oid_fwcode.9

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.9

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.9

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.9

asm 0xD82
jumptable 75x	prefix:switch_on_penstate.9

asm 0xB60
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.3

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.3

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.3

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.3

asm 0x4CA
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.3

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.3

asm 0x70
jumptable 6x	base:0x80	prefix:switch_on_oid_fwcode.3

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.3

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.3

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.3

asm 0xD82
jumptable 75x	prefix:switch_on_penstate.3

asm 0x91A
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.4

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.4

asm 0x70
jumptable 6x	base:0x80	prefix:switch_on_oid_fwcode.4

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.4

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.4

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.4

asm 0xCE2
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.4

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.4

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.4

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.4

asm 0x8AA
jumptable 75x	prefix:switch_on_penstate.4

asm 0x1DB8
jumptable 48x	base:0xc0	prefix:switch_on_oid_fwcode.c

asm 0x38
jumptable 34x	base:0x30	prefix:switch_on_oid_fwcode.c

asm 0x70
jumptable 22x	base:0x70	prefix:switch_on_oid_fwcode.c

asm 0x72
jumptable 22x	base:0xf01	prefix:switch_on_oid_fwcode.c

asm 0x3E
jumptable 9x	base:0x400	prefix:switch_on_oid_fwcode.c

asm 0x3E
jumptable 5x	base:0x108	prefix:switch_on_oid_fwcode.c

asm 0x112C
jumptable 75x	prefix:switch_on_penstate.c

asm 0x474
jumptable 5x

asm 0x316
jumptable 8x	base:1

asm 0x1F40
jumptable 39x	base:0x1a

asm 0x986
jumptable 39x	base:0x1a

asm 0x4798
jumptable 39x	base:0x1a

asm 0xE48
jumptable 34x	base:0x30	prefix:switch_on_button_fwcode.c

asm 0x38
jumptable 4x	base:0xc0	prefix:switch_on_button_fwcode.c

asm 0x38
jumptable 22x	base:0x70	prefix:switch_on_button_fwcode.c

asm 0x48
jumptable 13x	base:0xe0	prefix:switch_on_button_fwcode.c

asm 0x47CA
jumptable 4x

asm 0x41F6
jumptable 9x	base:0xa

asm 0xEC
jumptable 12x	base:0x24

asm 0x7E40
jumptable 4x

asm 0x932
jumptable 8x

asm 0xF08
jumptable 5x	base:0x404

asm 0xDAC
jumptable 14x

asm 0xAE
jumptable 14x

asm 0xAE
jumptable 14x

asm 0x3d76

#these are temporary, not really precise for now, code analysis must be done first
word 4096x	comment:unpartitioned1

# map_id = 00 through 6f, location is in file after multiplying by 4.
# Four values for each map_id, determined by int_format; the relevant one for ALB is the last.
word 1x	comment:00/00-01	sym:tbl_map_id_to_location
word 1x	comment:00/02
word 1x	comment:00/03
word 1x	comment:00/04 ALB 0x00 -> 0x01 -> 0x04 -> ptr OID table

word 1x	comment:01/00-01
word 1x	comment:01/02
word 1x	comment:01/03
word 1x	comment:01/04 ALB 0x01 -> 0x02 -> 0x08 -> ptr MP3 table

word 1x	comment:02/00-01
word 1x	comment:02/02
word 1x	comment:02/03
word 1x	comment:02/04 ALB ----

word 1x	comment:03/00-01
word 1x	comment:03/02
word 1x	comment:03/03
word 1x	comment:03/04 ALB ----

word 1x	comment:04/00-01
word 1x	comment:04/02
word 1x	comment:04/03
word 1x	comment:04/04 ALB 0x04 -> 0x03 -> 0x0C -> ptr soundtbl Start button first

word 1x	comment:05/00-01
word 1x	comment:05/02
word 1x	comment:05/03
word 1x	comment:05/04 ALB 0x05 -> 0x04 -> 0x10 -> ptr soundtbl Start button second

word 1x	comment:06/00-01
word 1x	comment:06/02
word 1x	comment:06/03
word 1x	comment:06/04 ALB 0x06 -> 0x05 -> 0x14 -> ptr soundtbl power down (FW disabled)

word 1x	comment:07/00-01
word 1x	comment:07/02
word 1x	comment:07/03
word 1x	comment:07/04 ALB 0x07 -> 0x06 -> 0x18 -> OID min & max

word 1x	comment:08/00-01
word 1x	comment:08/02
word 1x	comment:08/03
word 1x	comment:08/04 ALB 0x08 -> 0x07 -> 0x1c -> number of media files

word 1x	comment:09/00-01
word 1x	comment:09/02
word 1x	comment:09/03
word 1x	comment:09/04 ALB 0x09 -> 0x08 -> 0x20 -> ptr soundtbl volume up (FW disabled)

word 1x	comment:0a/00-01
word 1x	comment:0a/02
word 1x	comment:0a/03
word 1x	comment:0a/04 ALB 0x0a -> 0x09 -> 0x24 -> ptr soundtbl mode change

word 1x	comment:0b/00-01
word 1x	comment:0b/02
word 1x	comment:0b/03
word 1x	comment:0b/04 ALB 0x0b -> 0x0a -> 0x28 -> ptr soundtbl volume down (FW disabled)

word 1x	comment:0c/00-01
word 1x	comment:0c/02
word 1x	comment:0c/03
word 1x	comment:0c/04 ALB 0x0c -> 0x0b -> 0x2c -> book_modes

word 1x	comment:0d/00-01
word 1x	comment:0d/02
word 1x	comment:0d/03
word 1x	comment:0d/04 ALB ----

word 1x	comment:0e/00-01
word 1x	comment:0e/02
word 1x	comment:0e/03
word 1x	comment:0e/04 ALB 0x0e -> 0x19 -> 0x64 -> ptr soundtbl inactivity (FW disabled)

word 1x	comment:0f/00-01
word 1x	comment:0f/02
word 1x	comment:0f/03
word 1x	comment:0f/04 ALB 0x0f -> 0x26 -> 0x98 -> ptr soundtbl read error (FW disabled)



word 1x	comment:10/00-01
word 1x	comment:10/02
word 1x	comment:10/03
word 1x	comment:10/04 ALB ----

word 1x	comment:11/00-01
word 1x	comment:11/02
word 1x	comment:11/03
word 1x	comment:11/04 ALB ----

word 1x	comment:12/00-01
word 1x	comment:12/02
word 1x	comment:12/03
word 1x	comment:12/04 ALB ----

word 1x	comment:13/00-01
word 1x	comment:13/02
word 1x	comment:13/03
word 1x	comment:13/04 ALB ----

word 1x	comment:14/00-01
word 1x	comment:14/02
word 1x	comment:14/03
word 1x	comment:14/04 ALB ----

word 1x	comment:15/00-01
word 1x	comment:15/02
word 1x	comment:15/03
word 1x	comment:15/04 ALB ----

word 1x	comment:16/00-01
word 1x	comment:16/02
word 1x	comment:16/03
word 1x	comment:16/04 ALB ----

word 1x	comment:17/00-01
word 1x	comment:17/02
word 1x	comment:17/03
word 1x	comment:17/04 ALB ----

word 1x	comment:18/00-01
word 1x	comment:18/02
word 1x	comment:18/03
word 1x	comment:18/04 ALB ----

word 1x	comment:19/00-01
word 1x	comment:19/02
word 1x	comment:19/03
word 1x	comment:19/04 ALB ----

word 1x	comment:1a/00-01
word 1x	comment:1a/02
word 1x	comment:1a/03
word 1x	comment:1a/04 ALB ----

word 1x	comment:1b/00-01
word 1x	comment:1b/02
word 1x	comment:1b/03
word 1x	comment:1b/04 ALB ----

word 1x	comment:1c/00-01
word 1x	comment:1c/02
word 1x	comment:1c/03
word 1x	comment:1c/04 ALB ----

word 1x	comment:1d/00-01
word 1x	comment:1d/02
word 1x	comment:1d/03
word 1x	comment:1d/04 ALB ----

word 1x	comment:1e/00-01
word 1x	comment:1e/02
word 1x	comment:1e/03
word 1x	comment:1e/04 ALB ----

word 1x	comment:1f/00-01
word 1x	comment:1f/02
word 1x	comment:1f/03
word 1x	comment:1f/04 ALB ----

word 1x	comment:20/00-01
word 1x	comment:20/02
word 1x	comment:20/03
word 1x	comment:20/04 ALB 0x20 -> 0x20 -> 0x80 -> ptr soundtbl get ready for comparison (FW disabled)

word 1x	comment:21/00-01
word 1x	comment:21/02
word 1x	comment:21/03
word 1x	comment:21/04 ALB 0x21 -> 0x21 -> 0x84 -> ptr soundtbl recording beep (FW disabled)

word 1x	comment:22/00-01
word 1x	comment:22/02
word 1x	comment:22/03
word 1x	comment:22/04 ALB 0x22 -> 0x1e -> 0x78 -> ptr soundtbl no MP3s (FW disabled)

word 1x	comment:23/00-01
word 1x	comment:23/02
word 1x	comment:23/03
word 1x	comment:23/04 ALB 0x23 -> 0x18 -> 0x60 -> ptr soundtbl battery low (FW disabled)

word 1x	comment:24/00-01
word 1x	comment:24/02
word 1x	comment:24/03
word 1x	comment:24/04 ALB ----

word 1x	comment:25/00-01
word 1x	comment:25/02
word 1x	comment:25/03
word 1x	comment:25/04 ALB ----

word 1x	comment:26/00-01
word 1x	comment:26/02
word 1x	comment:26/03
word 1x	comment:26/04 ALB 0x26 -> 0x25 -> 0x94 -> ptr soundtbl stop (FW disabled)

word 1x	comment:27/00-01
word 1x	comment:27/02
word 1x	comment:27/03
word 1x	comment:27/04 ALB ----

word 1x	comment:28/00-01
word 1x	comment:28/02
word 1x	comment:28/03
word 1x	comment:28/04 ALB 0x28 -> 0x11 -> 0x44 -> ptr quiz tbl

word 1x	comment:29/00-01
word 1x	comment:29/02
word 1x	comment:29/03
word 1x	comment:29/04 ALB 0x29 -> 0x12 -> 0x48 -> ptr oidtbl good reply1

word 1x	comment:2a/00-01
word 1x	comment:2a/02
word 1x	comment:2a/03
word 1x	comment:2a/04 ALB 0x2a -> 0x13 -> 0x4c -> ptr oidtbl good reply2

word 1x	comment:2b/00-01
word 1x	comment:2b/02
word 1x	comment:2b/03
word 1x	comment:2b/04 ALB 0x2b -> 0x14 -> 0x50 -> ptr oidtbl bad reply1

word 1x	comment:2c/00-01
word 1x	comment:2c/02
word 1x	comment:2c/03
word 1x	comment:2c/04 ALB 0x2c -> 0x15 -> 0x54 -> ptr oidtbl bad reply2

word 1x	comment:2d/00-01
word 1x	comment:2d/02
word 1x	comment:2d/03
word 1x	comment:2d/04 ALB 0x2d -> 0x16 -> 0x58 -> ptr oidtbl inactivity in quiz

word 1x	comment:2e/00-01
word 1x	comment:2e/02
word 1x	comment:2e/03
word 1x	comment:2e/04 ALB ----

word 1x	comment:2f/00-01
word 1x	comment:2f/02
word 1x	comment:2f/03
word 1x	comment:2f/04 ALB 0x2f -> 0x17 -> 0x5c -> book id


word 1x	comment:30/00-01
word 1x	comment:30/02
word 1x	comment:30/03
word 1x	comment:30/04 ALB ----

word 1x	comment:31/00-01
word 1x	comment:31/02
word 1x	comment:31/03
word 1x	comment:31/04 ALB ----

word 1x	comment:32/00-01
word 1x	comment:32/02
word 1x	comment:32/03
word 1x	comment:32/04 ALB ----

word 1x	comment:33/00-01
word 1x	comment:33/02
word 1x	comment:33/03
word 1x	comment:33/04 ALB ----

word 1x	comment:34/00-01
word 1x	comment:34/02
word 1x	comment:34/03
word 1x	comment:34/04 ALB ----

word 1x	comment:35/00-01
word 1x	comment:35/02
word 1x	comment:35/03
word 1x	comment:35/04 ALB ----

word 1x	comment:36/00-01
word 1x	comment:36/02
word 1x	comment:36/03
word 1x	comment:36/04 ALB ----

word 1x	comment:37/00-01
word 1x	comment:37/02
word 1x	comment:37/03
word 1x	comment:37/04 ALB ----

word 1x	comment:38/00-01
word 1x	comment:38/02
word 1x	comment:38/03
word 1x	comment:38/04 ALB ----

word 1x	comment:39/00-01
word 1x	comment:39/02
word 1x	comment:39/03
word 1x	comment:39/04 ALB ----

word 1x	comment:3a/00-01
word 1x	comment:3a/02
word 1x	comment:3a/03
word 1x	comment:3a/04 ALB ----

word 1x	comment:3b/00-01
word 1x	comment:3b/02
word 1x	comment:3b/03
word 1x	comment:3b/04 ALB ----

word 1x	comment:3c/00-01
word 1x	comment:3c/02
word 1x	comment:3c/03
word 1x	comment:3c/04 ALB ----

word 1x	comment:3d/00-01
word 1x	comment:3d/02
word 1x	comment:3d/03
word 1x	comment:3d/04 ALB ----

word 1x	comment:3e/00-01
word 1x	comment:3e/02
word 1x	comment:3e/03
word 1x	comment:3e/04 ALB ----

word 1x	comment:3f/00-01
word 1x	comment:3f/02
word 1x	comment:3f/03
word 1x	comment:3f/04 ALB ----


word 1x	comment:40/00-01
word 1x	comment:40/02
word 1x	comment:40/03
word 1x	comment:40/04 ALB ----

word 1x	comment:41/00-01
word 1x	comment:41/02
word 1x	comment:41/03
word 1x	comment:41/04 ALB ----

word 1x	comment:42/00-01
word 1x	comment:42/02
word 1x	comment:42/03
word 1x	comment:42/04 ALB ----

word 1x	comment:43/00-01
word 1x	comment:43/02
word 1x	comment:43/03
word 1x	comment:43/04 ALB ----

word 1x	comment:44/00-01
word 1x	comment:44/02
word 1x	comment:44/03
word 1x	comment:44/04 ALB ----

word 1x	comment:45/00-01
word 1x	comment:45/02
word 1x	comment:45/03
word 1x	comment:45/04 ALB ----

word 1x	comment:46/00-01
word 1x	comment:46/02
word 1x	comment:46/03
word 1x	comment:46/04 ALB ----

word 1x	comment:47/00-01
word 1x	comment:47/02
word 1x	comment:47/03
word 1x	comment:47/04 ALB ----

word 1x	comment:48/00-01
word 1x	comment:48/02
word 1x	comment:48/03
word 1x	comment:48/04 ALB ----

word 1x	comment:49/00-01
word 1x	comment:49/02
word 1x	comment:49/03
word 1x	comment:49/04 ALB ----

word 1x	comment:4a/00-01
word 1x	comment:4a/02
word 1x	comment:4a/03
word 1x	comment:4a/04 ALB 0x4a -> 0x27 -> 0x9c -> ptr oidtbl fail in last question

word 1x	comment:4b/00-01
word 1x	comment:4b/02
word 1x	comment:4b/03
word 1x	comment:4b/04 ALB 0x4b -> 0x28 -> 0xa0 -> ptr oidtbl sucess in multiple answer question

word 1x	comment:4c/00-01
word 1x	comment:4c/02
word 1x	comment:4c/03
word 1x	comment:4c/04 ALB 0x4c -> 0x29 -> 0xa4 -> ptr oidtbl repeated answer

word 1x	comment:4d/00-01
word 1x	comment:4d/02
word 1x	comment:4d/03
word 1x	comment:4d/04 ALB 0x4d -> 0x2a -> 0xa8 -> ptr oidtbl quiz results

word 1x	comment:4e/00-01
word 1x	comment:4e/02
word 1x	comment:4e/03
word 1x	comment:4e/04 ALB 0x4e -> 0x00 -> 0x00 -> header key

word 1x	comment:4f/00-01
word 1x	comment:4f/02
word 1x	comment:4f/03
word 1x	comment:4f/04 ALB ----


word 1x	comment:50/00-01
word 1x	comment:50/02
word 1x	comment:50/03
word 1x	comment:50/04 ALB ----

word 1x	comment:51/00-01
word 1x	comment:51/02
word 1x	comment:51/03
word 1x	comment:51/04 ALB ----

word 1x	comment:52/00-01
word 1x	comment:52/02
word 1x	comment:52/03
word 1x	comment:52/04 ALB ----

word 1x	comment:53/00-01
word 1x	comment:53/02
word 1x	comment:53/03
word 1x	comment:53/04 ALB ----

word 1x	comment:54/00-01
word 1x	comment:54/02
word 1x	comment:54/03
word 1x	comment:54/04 ALB ----

word 1x	comment:55/00-01
word 1x	comment:55/02
word 1x	comment:55/03
word 1x	comment:55/04 ALB ----

word 1x	comment:56/00-01
word 1x	comment:56/02
word 1x	comment:56/03
word 1x	comment:56/04 ALB ----

word 1x	comment:57/00-01
word 1x	comment:57/02
word 1x	comment:57/03
word 1x	comment:57/04 ALB 0x57 -> 0x19 -> 0x64 -> ptr soundtbl inactivity (FW disabled)

word 1x	comment:58/00-01
word 1x	comment:58/02
word 1x	comment:58/03
word 1x	comment:58/04 ALB 0x58 -> 0x50 -> 0x140 -> prekey

word 1x	comment:59/00-01
word 1x	comment:59/02
word 1x	comment:59/03
word 1x	comment:59/04 ALB ----

word 1x	comment:5a/00-01
word 1x	comment:5a/02
word 1x	comment:5a/03
word 1x	comment:5a/04 ALB ----

word 1x	comment:5b/00-01
word 1x	comment:5b/02
word 1x	comment:5b/03
word 1x	comment:5b/04 ALB ----

word 1x	comment:5c/00-01
word 1x	comment:5c/02
word 1x	comment:5c/03
word 1x	comment:5c/04 ALB ----

word 1x	comment:5d/00-01
word 1x	comment:5d/02
word 1x	comment:5d/03
word 1x	comment:5d/04 ALB 0x5d -> 0x19 -> 0x64 -> ptr soundtbl inactivity (FW disabled)

word 1x	comment:5e/00-01
word 1x	comment:5e/02
word 1x	comment:5e/03
word 1x	comment:5e/04 ALB ----

word 1x	comment:5f/00-01
word 1x	comment:5f/02
word 1x	comment:5f/03
word 1x	comment:5f/04 ALB ----


word 1x	comment:60/00-01
word 1x	comment:60/02
word 1x	comment:60/03
word 1x	comment:60/04 ALB ----

word 1x	comment:61/00-01
word 1x	comment:61/02
word 1x	comment:61/03
word 1x	comment:61/04 ALB ----

word 1x	comment:62/00-01
word 1x	comment:62/02
word 1x	comment:62/03
word 1x	comment:62/04 ALB ----

word 1x	comment:63/00-01
word 1x	comment:63/02
word 1x	comment:63/03
word 1x	comment:63/04 ALB ----

word 1x	comment:64/00-01
word 1x	comment:64/02
word 1x	comment:64/03
word 1x	comment:64/04 ALB ----

word 1x	comment:65/00-01
word 1x	comment:65/02
word 1x	comment:65/03
word 1x	comment:65/04 ALB ----

word 1x	comment:66/00-01
word 1x	comment:66/02
word 1x	comment:66/03
word 1x	comment:66/04 ALB ----

word 1x	comment:67/00-01
word 1x	comment:67/02
word 1x	comment:67/03
word 1x	comment:67/04 ALB ----

word 1x	comment:68/00-01
word 1x	comment:68/02
word 1x	comment:68/03
word 1x	comment:68/04 ALB ----

word 1x	comment:69/00-01
word 1x	comment:69/02
word 1x	comment:69/03
word 1x	comment:69/04 ALB ----

word 1x	comment:6a/00-01
word 1x	comment:6a/02
word 1x	comment:6a/03
word 1x	comment:6a/04 ALB ----

word 1x	comment:6b/00-01
word 1x	comment:6b/02
word 1x	comment:6b/03
word 1x	comment:6b/04 ALB ----

word 1x	comment:6c/00-01
word 1x	comment:6c/02
word 1x	comment:6c/03
word 1x	comment:6c/04 ALB ----

word 1x	comment:6d/00-01
word 1x	comment:6d/02
word 1x	comment:6d/03
word 1x	comment:6d/04 ALB ----

word 1x	comment:6e/00-01
word 1x	comment:6e/02
word 1x	comment:6e/03
word 1x	comment:6e/04 ALB ----

word 1x	comment:6f/00-01
word 1x	comment:6f/02
word 1x	comment:6f/03
word 1x	comment:6f/04 ALB ----

word 256x	sym:tbl_encrypt_permutation_other
word 256x	sym:tbl_encrypt_permutation
word 50x	sym:tbl_syssound_id_to_map_id
word 128x	sym:tbl_MP3_byte_offsets
word 12x	sym:tbl_fwcode_to_mode


wbstr 62
wbstr 52
wbstr 38
wbstr 64
wbstr 48
wbstr 40

skip 1410

wbstr 20	comment:google:Haven't looked for it
wbstr 16	comment:google:Have been found
wbstr 32
wbstr 40
wbstr 56	comment:google:Order of answers
wbstr 66	comment:google:Number of correct answers
wbstr 40
wbstr 14
wbstr 80
wbstr 24
wbstr 52
wbstr 22	comment:google:Have been found
wbstr 48	comment:google:Correct number of voices
wbstr 32
wbstr 78
wbstr 38	comment:ChatGPT says that da fu weng may mean monopoly, special game or something like that
wbstr 42
wbstr 44
wbstr 38
wbstr 34
wbstr 8
wbstr 40	comment:google:Write it in
wbstr 60	comment:google:which audio to play
wbstr 44	comment:google:Read it
wbstr 40	comment:google:Read it
wbstr 8
wbstr 46	comment:google:Total number of audio
wbstr 26
wbstr 10
wbstr 4
wbstr 18

word 16x	symbol:all_bits_upto
word 16x	symbol:all_bits_above

word 58x	symbol:tbl_offsets_to_3bin_mp3tbl2
word 47x	symbol:tbl_offsets_to_3bin_mp3tbl1
word 78x	symbol:tbl_num_to_3bin_string
word 17x	sym:tbl_dac_volume_values
word 10x	sym:tbl_equalizer_preset1
word 10x	sym:tbl_equalizer_preset2
word 10x	sym:tbl_equalizer_preset3
word 10x	sym:tbl_equalizer_preset4
word 10x	sym:tbl_equalizer_preset5
word 10x	sym:tbl_equalizer_preset6

wbstr 18	sym:string_sd:\Game_3
wbstr 32
wbstr 8
wbstr 26
wbstr 8
wbstr 18
wbstr 18

word 6x	sym:tbl_lengths_of_following_tables
word 6x	sym:tbl_sounds1
	0x429ed7	sound 2/37, 故事 [Story]
	0x429ed8	sound 2/38, 学习 [I learn]
	0x429ed9	sound 2/36, 我学 [I studied]
	0x429eda	sound 2/34, 知识 [Knowledge]
	0x429edb	sound 2/35, 音樂 [Music]
	0x429edc	sound 2/33, 催眠曲 [Lullaby]
word 3x	sym:tbl_sounds2
	0x429edd	sound 2/25, 钢琴曲 [Piano song]
	0x429ede	sound 2/26, 交响乐 [Symphony]
	0x429edf	sound 2/201, 胎教音乐 [Prenatal Educational Music]

word 7x	sym:tbl_sounds3
	0x429ee0	sound 2/10, 百家姓 [Hundred Family Names]
	0x429ee1	sound 2/14, 成语 [Idiom]
	0x429ee2	sound 2/15, 弟子归 [The disciple returns]
	0x429ee3	sound 2/31, 论语 [Analects of Confucius]
	0x429ee4	sound 2/195, 三字经 [Three Character Classic]
	0x429ee5	sound 2/202, 唐诗 [Tang Poetry]
	0x429ee6	sound 2/234, 中国诗乐 [Chinese Poetry and Music]

word 5x	sym:tbl_sounds4
	0x429ee7	sound 2/192, 亲子梅雨教室 [Parent-child plum rain classroom??]
	0x429ee8	sound 2/199, 数学小天才 [A Little Genius in Mathematics]
	0x429ee9	sound 2/242, 英语小天才 [Little English of Genius]
	0x429eea	sound 2/241, 英语单词顺口溜 [English Vocabulary Rhymes]
	0x429eeb	sound 2/246, 语文小天才 [Little Chinese genius]

word 6x	sym:tbl_sounds5
	0x429eec	sound 2/12, 宝宝童谣 [Baby Children‘s Rhyme]
	0x429eed	sound 2/16, 儿歌说学斗唱 [Children’s songs and Learn to Sing]
	0x429eee	sound 2/28, 经典英文儿歌 [Classic English Children’s Songs]
	0x429eef	sound 2/29, 经典粤语儿歌 [Classic Cantonese Children’s Songs]
	0x429ef0	sound 2/30, 经典中文儿歌 [Classic Chinese Children’s Songs]
	0x429ef1	sound 2/240, 影视剧经典儿歌 [Classic Children’s Songs from Film and TV]

word 5x	sym:tbl_sound6
	0x429ef2	sound 2/18, 儿童笑话 [Children’s Jokes]
	0x429ef3	sound 2/198, 十万个为什么 [Hundreds of Thousands of Whys]
	0x429ef4	sound 2/239, 万能博士小叮当 [Little Tinker: Dr.Know-it-all]
	0x429ef5	sound 2/243, 益智百科小叮当[Little Tinker: Encyclopedia Explorer]
	0x429ef6	sound 2/238, 自然科学小叮当 [Little Tinker: Natural Science]

word 13x	sym:tbl_sound7
	0x429ef7	sound 2/11, 宝宝睡前故事 [Baby Bedtime Stories]
	0x429ef8	sound 2/13, 成功预言故事 [Prophecy Tales]
	0x429ef9	sound 2/17, 儿童EQ教育童话 [Children’s EQ Education Fairy Tale]
	0x429efa	sound 2/27, 经典童话绘本 [Classic Fairy Tale Picture Book]
	0x429efb	sound 2/32, 名人伟人故事 [Stories of Famous People]
	0x429efc	sound 2/191, 亲子床边故事 [Parent-child bedside story]
	0x429efd	sound 2/196, 世界名著 [World Famous Works]
	0x429efe	sound 2/197, 世界童话故事 [World Fairy Tales]
	0x429eff	sound 2/200, 四大名著 [Four Great Masterpieces]
	0x429f00	sound 2/233, 智慧经典绘本 [Classic Wisdom Picture Books]
	0x429f01	sound 2/235, 中国童话故事 [Chinese Fairy Tales]
	0x429f02	sound 2/236, 中英双语童话 [Bilingual Fairy Tales (Chinese and English)]
	0x429f03	sound 2/237, 著名广播剧 [Famous Radio Dramas]

str 16	sym:str_Chomptechv1.0.0\0
	0x40c80c	word 0 of str_Chomptechv1.0.0\0
	0x40c81e	word 1 of str_Chomptechv1.0.0\0
	0x40c837	word 2 of str_Chomptechv1.0.0\0
	0x40c846	word 3 of str_Chomptechv1.0.0\0
	0x40c862	word 4 of str_Chomptechv1.0.0\0
	0x40c874	word 5 of str_Chomptechv1.0.0\0
	0x40c890	word 6 of str_Chomptechv1.0.0\0
	0x40c89f	word 7 of str_Chomptechv1.0.0\0


wbstr 4
str 56
wbstr 4
wbstr 6
wbstr 44
wbstr 4
wbstr 4
wbstr 6
wbstr 24
wbstr 34
wbstr 24
wbstr 16
wbstr 18
wbstr 4
wbstr 36
wbstr 48
wbstr 4
wbstr 4
wbstr 42
wbstr 4
wbstr 6
wbstr 36
wbstr 6
wbstr 4
wbstr 30
wbstr 36

word 17x	sym:mp3_playback_speeds

wbstr 6
wbstr 4
wbstr 20

word 1x	sym:buttons_thresholds	comment:button 1 (vol+)
word 1x	comment:button 1, low ADC value
word 1x	comment:button 1, high ADC value

word 1x	comment:button 2 (vol-)
word 1x	comment:button 2, low ADC value
word 1x	comment:button 2, high ADC value

word 1x	comment:button 3 (repeat)
word 1x	comment:button 3, low ADC value
word 1x	comment:button 3, high ADC value

word 1x	comment:button -
word 1x	comment:button -
word 1x	comment:button -

word 10x	sym:battery_thresholds
wbstr 10
wbstr 4
wbstr 4

pointer 3x	sym:func_ptr_table1

wbstr 4
wbstr 4

#this is for original firmware
skip 0x2bf5e

#this is for patched firmware (cross-checking of created rom-dumping assembly)
#asm 0x200
#skip 0x2bd5e
 
#end of mapping area


[SYMBOLS]

#rom1

#reset handling
0x000000	reset
0x000080	naked_reset_memory_prepare
0x000732	main_reset_handler_cont(void)
	0x00075f	if PRAM memory checksum failed, continue boot process from other devices, otherwise jump to SysMain
0x00076a	reset_handler_boot_from_other_devices

0x0001d8	firmware_module_loader_stk(wModule)
	0x0001df	0x400080 -> signature of chip
	0x000219	here is verified that firmware is for this chip
	0x000222	number of modules read
	0x000231	reading first word 
	0x000238	checking with input
	0x00023b	when found, call sub
	0x000243	R0 is still passed out

0x00014c	pram_memory_copier_stk(pModuleRecord)_ret_bool
	0x000159	PRAM len in words
	0x000163	low addr in firmware
	0x00016d	high addr in firmware
	0x000178	PRAM low addr
	0x000182	PRAM high addr
	0x000192	store PRAM len to DM[0x00c]
	0x00019a	store PRAM addr to DM[0x00d,0x00e]
	0x0001a5	here do DMA copy of block from firmware to PRAM
	0x0001c9	first word of record stored in RAM[0x0020]_why
	0x0001c7	we can fail if PRAM checksum does not match!

0x000112	compute_and_verify_memory_sum_stk(pMemory,wLen,dwChecksum)_ret_bool


#interrupts in ROM
0x000014	rom_intvec_AD
0x000018	rom_intvec_T0
0x00001c	rom_intvec_P0.0
0x000020	rom_intvec_T1
0x000024	rom_intvec_P0.1
0x000028	rom_intvec_T2
0x00002C	rom_intvec_P0.2
0x000034	rom_intvec_DA
0x000038	rom_intvec_SPI
0x00003C	rom_intvec_MSP
0x000040	rom_intvec_I2S
0x000050	rom_intvec_USB
0x000058	rom_intvec_RTC
0x00005C	rom_intvec_SD
0x000064	rom_intvec_DMA_SD_RW
0x000068	rom_intvec_SAR_AD
0x00006C	rom_intvec_DMA_SD2_RW
0x000078	rom_intvec_DMA_DEV_RW


#interrupts in PRAM
0x004000	SysMain
0x004002	pram_intvec_AD
0x004004	pram_intvec_T0
0x004006	pram_intvec_P0.0
0x004008	pram_intvec_T1
0x00400a	pram_intvec_P0.1
0x00400c	pram_intvec_T2
0x00400e	pram_intvec_P0.2
0x004010	pram_intvec_DA
0x004012	pram_intvec_SPI
0x004014	pram_intvec_MSP
0x004016	pram_intvec_I2S
0x004018	pram_intvec_USB
0x00401a	pram_intvec_RTC
0x00401c	pram_intvec_SD
0x00401e	pram_intvec_DMA_SD_RW
0x004020	pram_intvec_SAR_AD
0x004022	pram_intvec_DMA_SD2_RW
0x004024	pram_intvec_DMA_DEV_RW



0x000007	naked_memcpy_from_[X1:Ix1]_to_RAM[Ix0]_X0_words
0x00002e	naked_RAM[Ix0]=local(X0)
0x000051	naked_RAM[Ix0,Ix0+1]=local(X0,X0+1)
0x0002ea	probably_naked_OID_Init(void)
0x000305	naked_OID_Check_ReadData(void)
0x00031f	OID_TransmitCmd_stk(wCmd)
0x0003e8	PowerDown_OID_By_DSP()
0x000673	naked_delay_2us
0x000678	naked_delay_4us
0x00067d	naked_delay_64us
0x000683	naked_set_P0.15_as_input
0x000687	naked_set_P0.15_as_output
0x00068b	naked_set_P0.15_on
0x00068f	naked_set_P0.15_off
0x000693	naked_set_P0.14_on_INTEN_global_interrupt_enable
0x00069a	naked_set_P0.14_on_INTEN_global_interrupt_enable_and_wait_4us
0x00069f	naked_set_P0.14_off_INTEN_global_interrupt_disable_and_wait_2us

# dword subtraction functions
0x0007da	naked_Y0X0=X1X0_minus_Y1Y0
0x0007ed	naked_Y0X0=RAM[Ix0,Ix0+1]_signed_minus_Y1Y0
0x0007fa	naked_Y0X0=R1R0_signed_minus_Y1Y0
0x000808	naked_Y0X0=X1X0_signed_minus_R1R0
0x00081c	naked_Y0X0=X1X0_signed_minus_RAM[Ix1,Ix1+1]
0x000825	naked_Y0X0=local(X0,X0+1)_minus_RAM[Ix1,Ix1+1]
0x000828	naked_Y0X0=local(X0,X0+1)_minus_local(X1,X1+1)
0x00082a	naked_Y0X0=local(X0,X0+1)_minus_Y1Y0
0x00082d	naked_Y0X0=RAM[Ix0,Ix0+1]_minus_local(X1,X1+1)
0x000830	naked_Y0X0=RAM[Ix0,Ix0+1]_minus_RAM[Ix1,Ix1+1]
0x000835	naked_Y0X0=RAM[Ix0,Ix0+1]_minus_Y1Y0
0x000838	naked_Y0X0=RAM[Ix0,Ix0+1]_minus_R1R0
0x000840	naked_Y0X0=R1R0_minus_RAM[Ix1,Ix1+1]
0x000842	naked_Y0X0=R1R0_minus_Y1Y0
0x000845	naked_Y0X0=R1R0_minus_local(X1,X1+1)
0x00084b	naked_Y0X0=local(X0,X0+1)_minus_R1R0
0x000850	naked_Y0X0=X1X0_minus_R1R0
0x000864	naked_Y0X0=X1X0_minus_RAM[Ix1,Ix1+]
0x000879	naked_RAM[X1,X1+1]=RAM[Ix1,Ix1+1]_minus_RAM[Ix0,Ix0+1]
0x000882	naked_RAM[Ix0,Ix0+1]=local(X0,X0+1)_minus_RAM[Ix1,Ix1+1]
0x00088a	naked_RAM[Ix0,Ix0+1]=RAM[Ix1,Ix1+1]_minus_Y1Y0
0x00088d	naked_R1R0=RAM[Ix1,Ix1+1]_minus_RAM[Ix0,Ix0+1]
0x000899	naked_R1R0=local(X0,X0+1)_minus_local(Y1,Y1+1)
0x00089c	naked_R1R0=local(X0,X0+1)_minus_Y1Y0
0x00089f	naked_R1R0=RAM[Ix1,Ix1+1]_minus_Y1Y0
0x0008ae	naked_local(X1,X1+1)=local(X0,X0+1)_minus_local(Y1,Y1+1)
0x0008b1	naked_local(X1,X1+1)=local(X0,X0+1)_minus_Y1Y0
0x0008b7	naked_local(X1,X1+1)=R1R0_minus_Y1Y0
0x0008ba	naked_RAM[Ix0+1,Ix0]=Y1Y0_minus_R1R0
0x0008c9	naked_RAM[Ix0+1,Ix0]=local(X0,X0+1)_minus_R1R0
0x0008d7	naked_R1R0=local(X0,X0+1)_minus_R1R0
0x0008e0	naked_R1R0=Y1Y0_minus_RAM[Ix1,Ix1+1]
0x0008e6	naked_local(X1,X1+1)=local(X0,X0+1)_minus_R1R0

# dword AND functions
0x000905	naked_RAM[X1,X1+1]=RAM[Ix1,Ix1+1]_and_RAM[Ix0,Ix0+1]
0x000908	naked_RAM[Ix0,Ix0+1]=R1R0_and_RAM[Ix1,Ix1+1]
0x000910	naked_RAM[Ix0,Ix0+1]=local(X0,X0+1)_and_Y1Y0
0x000916	naked_RAM[Ix0,Ix0+1]=RAM[Ix1,Ix1+1]_and_Y1Y0
0x00091c	naked_R1R0=R1R0_and_RAM[Ix0,Ix0+1]
0x000928	naked_R1R0=local(X0,X0+1)_and_Y1Y0
0x00092b	naked_R1R0=RAM[Ix1,Ix1+1]_and_Y1Y0
0x000931	naked_local(X1,X1+1)=R1R0_and_RAM[Ix0,Ix0+1]
0x00093d	naked_local(X1,X1+1)=local(X0,X0+1)_and_Y1Y0


# dword addition functions
0x000952	naked_RAM[X1,X1+1]=RAM[Ix1,Ix1+1]_plus_RAM[Ix0,Ix0+1]
0x000955	naked_RAM[Ix0,Ix0+1]=R1R0_plus_RAM[Ix1,Ix1+1]
0x00095b	naked_RAM[Ix0,Ix0+1]=local(X0,X0+1)_plus_RAM[Ix1,Ix1+1]
0x00095d	naked_RAM[Ix0,Ix0+1]=local(X0,X0+1)_plus_Y1Y0
0x000963	naked_RAM[Ix0,Ix0+1]=RAM[Ix1,Ix1+1]_plus_Y1Y0
0x000966	naked_R1R0=RAM[Ix1,Ix1+1]_plus_RAM[Ix0,Ix0+1]
0x000969	naked_R1R0=R1R0_plus_RAM[Ix0,Ix0+1]
0x00096c	naked_R1R0=R1R0_plus_local(X0,X0+1)
0x00096f	naked_R1R0=local(X0,X0+1)_plus_RAM[Ix0,Ix0+1]
0x000972	naked_R1R0=local(X0,X0+1)_plus_local(Y1,Y1+1)
0x000975	naked_R1R0=local(X0,X0+1)_plus_Y1Y0
0x000978	naked_R1R0=RAM[Ix1,Ix1+1]_plus_Y1Y0
0x00097e	naked_local(X1,X1+1)=R1R0_plus_RAM[Ix0,Ix0+1]
0x000981	naked_local(X1,X1+1)=R1R0_plus_local(X0,X0+1)
0x00098a	naked_local(X1,X1+1)=local(X0,X0+1)_plus_Y1Y0
0x000990	naked_local(X1,X1+1)=R1R0_plus_Y1Y0

# word bit shift functions
0x0009b1	naked_RAM[Ix1]=Y0_lshift_X0
0x0009b6	naked_RAM[Ix1]=RAM[Ix0]_lshift_X0
0x0009c2	naked_local(X1)=local(Y0)_lshift_X0
0x0009c4	naked_RAM[Ix1]=local(Y0)_lshift_X0
0x0009c8	naked_R0=Y0_lshift_X0
0x0009ca	naked_R1=R0_lshift_X0
0x0009cd	naked_R0=RAM[Ix0]_lshift_X0
0x0009d7	naked_R0=local(Y0)_lshift_X0
0x0009da	naked_R1=local(Y0)_lshift_X0

0x000a01	naked_RAM[Ix1]=RAM[Ix0]_rshift_X0
0x000a06	naked_RAM[Ix1]=R0_rshift_X0
0x000a18	naked_R0=RAM[Ix0]_rshift_X0
0x000a1a	naked_R1=RAM[Ix0]_rshift_X0
0x000a22	naked_R0=local(Y0)_rshift_X0

# dword bit shift functions
0x000a73	naked_R1R0=R1R0_lshift_X0
0x000a90	naked_local(X1,X1+1)=Y1Y0_lshift_X0
0x000a92	naked_RAM[Ix1,Ix1+1]=Y1Y0_lshift_X0
0x000a97	naked_local(X1,X1+1)=RAM[Ix0,Ix0+1]_lshift_X0
0x000a99	naked_RAM[Ix1,Ix1+1]=RAM[Ix0,Ix0+1]_lshift_X0
0x000a9e	naked_local(X1,X1+1)=R1R0_lshift_X0
0x000aa3	naked_local(X1,X1+1)=local(Y0,Y0+1)_lshift_X0
0x000aaa	naked_R1R0=Y1Y0_lshift_X0
0x000aad	naked_R1R0=RAM[Ix0,Ix0+1]_lshift_X0
0x000ab0	naked_R1R0=local(Y0,Y0+1)_lshift_X0

0x000ab3	naked_R1R0=R1R0_rshift_X0
0x000ad7	naked_local(X1,X1+1)=RAM[Ix0,Ix0+1]_rshift_X0
0x000ad9	naked_RAM[Ix1,Ix1+1]=RAM[Ix0,Ix0+1]_rshift_X0
0x000ade	naked_local(X1,X1+1)=R1R0_rshift_X0
0x000ae0	naked_RAM[Ix1,Ix1+1]=R1R0_rshift_X0
0x000ae3	naked_local(X1,X1+1)=local(Y0,Y0+1)_rshift_X0
0x000aed	naked_R1R0=RAM[Ix0,Ix0+1]_rshift_X0
0x000af0	naked_R1R0=local(Y0,Y0+1)_rshift_X0

0x000af3	naked_R1R0=R1R0_arshift_X0
0x000b15	naked_local(X1,X1+1)=RAM[Ix0,Ix0+1]_arshift_X0
0x000b2b	naked_R1R0=RAM[Ix0,Ix0+1]_arshift_X0
0x000b2e	naked_R1R0=local(Y0,Y0+1)_arshift_X0

# Prepares stackframe:
# - pushes DM(0x000) [akin to x86 push BP]
# - DM(0x000) = Sp   [BP = SP]
# - variants with Y0: raise Sp by Y0, creating space for local variables
# - variants with X1, Y1: push DM(0x001) through DM(0x01e) as given by bits of X1[2..] and Y1
# - NB: meaning of lowest two bits of X1 unknown.
# - variants with Y1: expose pushed arguments 1 through 8 as MR1, MR0, R1, R0, Y1, Y0, X1, X0
#   as given by high byte bits of Y1.
# - If a function has 9 arguments, the last is accessed through local[0xfff4]:
#   fff4 .. arg9
#   fff5 .. arg8
#   fff6 .. arg7
#   fff7 .. arg6
#   fff8 .. arg5
#   fff9 .. arg4
#   fffa .. arg3
#   fffb .. arg2
#   fffc .. arg1
#   fffd .. return addr
#   fffe .. return addr
#   ffff .. previous DM(0x000)
#   0000 .. start of local variables <<< DM(0x000) points here
#     Y0 .. start of saved DM(...)
#     ?? .. current Sp
0x000b31	FunctionPrologue(Y0)
0x000b3c	FunctionPrologue(X1,Y1)
0x000b3e	FunctionPrologue(Y1)
0x000b3f	FunctionPrologue(Y1,Y0)
0x000b41	FunctionPrologue(X1)
0x000b42	FunctionPrologue(X1,Y0)
0x000b43	FunctionPrologue(X1,Y1,Y0)

0x000b7c	naked_prepare_Y1Y0=local(X0,X0+1)|Ix0=ptr2local_var(X1)

# Various functions facilitating implementation of dword operations in various combinations of parameters.
# Not called from any other context.
#0x000b6a:	(X, Y, Ix0) = (RAM(Ix1,+1), RAM(Ix0,+1), X1)
#0x000b70:	(X, Y, Ix0) = (RAM(Ix1,+1), RAM(Ix0,+1), &local(X1))
#0x000b77:	(Y, Ix0) = (RAM(Ix0,+1), &local(X1))
#0x000b7c:	(Y, Ix0) = (local(X0,+1), &local(X1))
#0x000b81:	(X, Y, Ix0) = (local(X0,+1), RAM(Ix0,+1), &local(X1))
#0x000b88:	(X, Y, Ix0) = (local(X0,+1), local(Y1,Y1+1), &local(X1))
#0x000b8f:	(X, Ix0) = (local(X0,+1), &local(X1))
#0x000b94:	(X, Ix0) = (RAM(Ix1,+1), &local(X1))
#0x000c84:	Y = local(X1,+1)
#0x000c8f:	X = local(X0,+1) == 0x000c81?
#0x000c94:	can't guess
#0x000072:      Ix0 = &local(X1)

# Leaves the frame prepared by FunctionPrologue.
# Does not need the local stack size so Y0 is not provided (0x000b99 mirrors 0x000b31)
# Meaning of values X1, Y1 is swapped.
0x000b99	FunctionEpilogue()
0x000b9c	FunctionEpilogue(X1)
0x000b9e	FunctionEpilogue(Y1)
0x000b9f	FunctionEpilogue(X1,Y1)

0x000042	naked_Ix1=ptr2local_var(X1)
0x000046	naked_Ix1=ptr2local_var(Y1)
0x00004a	naked_Ix1=ptr2local_var(X0)
0x00006e	naked_Ix0=ptr2local_var(X0)
0x000072	naked_Ix0=ptr2local_var(X1)

0x00005e	naked_Y1Y0=local(X0,X0+1)_(Ix0)
0x00007a	naked_Y1Y0=local(X0,X0+1)_(Ix1)
0x000c81	naked_X1X0=local(X0,X0+1)_(Ix0)_dup
0x000c8f	naked_X1X0=local(X0,X0+1)_(Ix1)
0x000c94	naked_X1X0=local(X0,X0+1)_(Ix0)
0x000c8c	naked_X1X0=local(X1,X1+1)
0x000c84	naked_Y1Y0=local(X1,X1+1)
0x000c87	naked_Y1Y0=local(Y1,Y1+1)

0x0000d7	naked_X0=X1_div_Y1_Y0=X1_mod_Y1
0x000c99	naked_X0=X1_mod_Y1
0x000c33	naked_X0=X1_div_Y1_signed_Y0=X1_mod_Y1
0x000c5c	naked_X0=X1_mod_Y1_signed

0x000c9d	naked_X1X0=ROM[X0:Ix0,X0:Ix0+1]
0x000ca1	naked_Y1Y0=ROM[X1:Ix1,X1:Ix1+1]

# locals store and load functions
0x000bc5	naked_local(Y1)=R0
0x000bc9	naked_local(Y1)=R1
0x000bcd	naked_local(Y1)=X0
0x000bd1	naked_local(Y1)=X1
0x000bd5	naked_local(Y1)=Y0
0x000bd9	naked_local(Y1)=RAM[Ix0]
0x000be1	naked_local(Y1)=local(X1)

0x000c04	naked_R0=local(X0)
0x000c08	naked_R1=local(X0)
0x000c0c	naked_X0=local(X0)
0x000c10	naked_X1=local(X0)
0x000c14	naked_Y0=local(X0)
0x000c18	naked_Y1=local(X0)

0x0009f5	naked_R0=local(Y0)

0x000c1c	naked_local(Y1,Y1+1)=R1R0
0x000c21	naked_local(Y1,Y1+1)=X1X0
0x000c24	naked_local(Y1,Y1+1)=RAM[Ix0,Ix0+1]
0x000c2e	naked_local(Y1,Y1+1)=local(X1,X1+1)

# pop stack functions
0x000c49	naked_pop_8_words
0x000c4b	naked_pop_7_words
0x000c4d	naked_pop_6_words
0x000c4f	naked_pop_5_words
0x000c51	naked_pop_4_words
0x000c53	naked_pop_3_words
0x000c54	naked_pop_Y0_words


#rom2
0x282076	equalizer_set_active(bActive)
0x28208b	equalizer_set_band_level(wBand,wLevel)
0x2820b5	equalizer_reset_levels()
0x28913e	FS_FileExists_maybe_stk(szPath,FLAG)_ret_errc_in_R0
0x2897d0	MP3_ChangeSpeed(wDelta)
0x289fa3	naked_R1R0=X1X0_mod_Y1Y0
0x289fa5	naked_R1R0=X1X0_div_Y1Y0
0x28a0f1	strncmp(szLhs,szRhs,wCount)
0x28a666	naked_R1R0=R1R0_mul_X1X0
0x28a668	naked_R1R0=X1X0_mul_Y1Y0
0x28aa63	FS_FReadSector(pData,pFile)
0x28aa9c	FS_FWriteSector(pData,pFile)
0x28aad5	read_first_sector(0,pDirEnt,0,pBuffer)
0x28b1e5	strchr(szStr,wChr)
0x28b2b0	FS_DirRewind(pDir)
0x28b4ca	strlen_stk(szString)_ret_in_R0
0x28b6bc	delay_ms(milliseconds)
0x28b873	MP3_Pause_OnOff(pauseOn)
0x28b93d	FS_DirClose(pDir)
0x28ba0f	toupper(wChar)
0x28bb17	IMAADPCM_Pause_OnOff(pauseOn)
0x28bd00	naked_X0=Get_word_from_table_at_R1R0
0x28bcfd	naked_X0=Get_word_from_table_at_RAM[Ix0,Ix0+1]
0x28bc94	naked_X1X0=Get_dword_from_table_at_RAM[Ix0,Ix0+1]
0x28bc97	naked_X1X0=Get_dword_from_table_at_R1R0
0x28bcdb	SD_DAC_Volume_Control_stk(wVolume)
0x28beb2	MP3_GetStatus()
0x28beae	IMAADPCM_GetStatus()
0x28be76	naked_WDT_14_set(void)
0x28a61c	void_SF_Set_Baud_Rate(wBRMode)
0x28af3d	probably_SF_Read_Factory_ID(void)_ret_R1R0
0x28bc70	probably_SF_WakeUp(void)_void
0x28be4b	probably_naked_SF_Enable(void)_void
0x28be43	probably_naked_SF_Disable(void)_void
0x28bfb6	string_fname_filters_maybe1
0x28bfc0	string_fname_filters_maybe2
0x28b740	nonabi_wait_multiples_of_1.4us(wCnt)_void

#code0
0x006fd7	naked_MP3_or_PCM_GetStatus_is_PAUSE()_return_bool_in_R0
0x006fe5	naked_MP3_or_PCM_GetStatus_is_PLAY()_return_bool_in_R0
0x00701f	MP3_PlayProcess_Ext_probably
0x007018	MP3_PlayProcess_Ext_probably_2
0x0056aa	Something_with_updateA_chp
0x0058a9	dynamic_halt
0x006c11	naked_void_Init_of_large_mem_blocks_3e3d_3e0d(void)
0x006948	lib_seek_stk(pFile,dwPtr,wWhence)_return?
0x006073	lib_fgetw_stk(pFile,wBuffer)_return?
0x006eb7	lib_fgetdw_stk(pFile,wBuffer)_return?

#code1
0x40012f	naked_RAM[Ix1,Ix1+1]=neg_X0X1
0x400134	naked_RAM[Ix1,Ix1+1]=neg_R0R1
0x400139	naked_R0R1=neg_X0X1
0x40013c	naked_RAM[Ix1,Ix1+1]=neg_RAM[Ix0,Ix0+1]
	
#code2
0x421140	handle_ignored_magic_values2_unk
0x421146	handle_other_magic_values2_unk
0x4211af	handle_other_magic_values3_unk
0x4211b3	handle_other_magic_values4_unk
0x4211b7	handle_other_magic_values5_unk
0x427b9e	memset_stk(szMem,wContent,iBytes)
0x426272	strcat_str(szDst,szSrc)
0x427b35	Check_P4_and_possibly_get_MP3_status
0x428330	naked_void_ClearPort0Bit7(void)
0x42833c	naked_void_ClearPort0Bit10(void)
0x428336	naked_void_SetPort0Bit10(void)
0x42832a	naked_void_SetPort0Bit8(void)
0x428324	naked_void_ClearPort0Bit8(void)
0x42831e	naked_void_SetPort3Bit11(void)
0x428318	naked_void_SetPort3Bit13(void)
0x428312	naked_void_ClearPort3Bit11(void)
0x42830c	naked_void_ClearPort3Bit13(void)
0x428305	naked_void_SetTimer1_to_10Hz_repeat(void)
0x4282d6	naked_get_book_ctx[0x12](void)_ret_in_R0
0x4282de	naked_get_book_ctx[0x29](void)_ret_in_R0
0x4282e6	naked_get_book_ctx[0x28](void)_ret_in_R0
0x4282ee	naked_get_book_ctx[0x27](void)_ret_in_R0
0x4282f6	naked_get_book_ctx[0x3e](void)_ret_in_R0
0x4280b5	void_set_book_ctx[0x12]_stk(iValue)
0x420730	naked_void_Initialize_all_vars(void)
0x4203b8	naked_void_Init_button_tracking(void)
0x427b11	Init_3ddd_to_3dd8
0x4282ce	naked_void_Init_3e01_to_3e00(void)
0x4282fe	naked_void_Init_inactivity_timers(void)
0x4282be	naked_void_Init_main_mode(void)
0x428053	Init_3d06_to_3d02
0x4273d0	Init_3dae_to_3da4
0x428014	Init_timers
0x4280c8	Init_OID_module_variables
0x427f07	Init_3dd6_to_3dce
0x4281df	naked_void_Init_3df4_to_3df9(void)
0x427eef	Zero_3fa0_to_4000
0x4268f7	Initialize_OID_module_if_not_yet_initialized
0x427b58	Initialize_OID_module_unconditionally
0x426728	Read_OID_sensor
	0x426747	valid OID3
	0x426750	valid OID2
	0x426772	valid position data
0x426dc7	Copy_Ext_to_PRAM?
0x426f36	Copy_WRAM_to_PRAM?
0x4282b5	naked_void_nop_dbgprint(...)
0x40a467	naked_void_Init_3fdd_3fa0_3ff2_3ff3(void)
0x428342	naked_void_Get_[3df5]_in_R0(void)
0x428346	naked_void_Get_[3df3]_in_R0(void)
0x42834a	naked_void_Get_volume_in_R0(void)
0x428352	naked_void_Get_mp3_speed_in_R0(void)
0x428356	naked_void_ClearPort0Bit7_2(void)
0x428359	naked_if_p4bit8_then_set_p0bit7_2
0x42758b	naked_void_huge_hw_init_and_3d9f_3d9b_3daf(void)
0x42040b	naked_void_hw_adc_settings1(void)
0x427e3d	naked_void_hw_adc_settings2(void)
0x42041f	naked_void_SetTimer0_to_~400Hz_repeat
0x42835c	call_0002ea()
0x428290	naked_void_get_book_ctx[0x3f]_ret_in_R0
0x42827c	naked_void_Init_3df4_3df5_3df3(void)
0x428286	naked_get_book_ctx[0x0](void)_ret_in_R0
0x428272	naked_void_just_a_nop_2__return_0(void)
0x42822d	naked_void_Init_3fe9=ffff_3ff6_3fa6(void)
0x4218e4	File_Open_Lib_Call_Probably_stack(szFname,szAccess)_ret_errc_in_R0
0x4277e9	File_Close_Lib_Probably_stk(pFile)
0x427727	Set_user_volume_to_DAC_volume_stk(volume)
0x4278d5	Set_user_volume_to_DAC_volume
0x422324	Play_sound_from_2bin_table_stk(wSoundNum)
	0x42232b	DM[0x17] is sound number
	0x42232d	265 is upper bound of sounds in 2bin
	0x422334	multiply sound by 4 (address of DWORD in table)
	0x422340	on stack is pointer from 0x400050 - 2bin

	0x41f998	addr 40031a is pointer to table of texts
	0x41faab	addr 40031a is pointer to table of texts
	0x423b68	addr 400054 is pointer to 3bin
	0x424564	addr 400054 is pointer to 3bin
	0x424a7f	addr 400054 is pointer to 3bin
	0x41e8f2	probably_mp3_player_stk(pFile,dwOffset,dwLen,wFlag)

0x427005	ReadWordFrom3bin+dwPtr_stk(dwPtr)_return_in_R0
	0x423acf	3bin ptr 0x030344 2BD0
	0x423adb	3bin ptr 0x030346 000A
0x423abc	Play_sound_from_3bin_mp3table2_stk(wSoundNum)
0x4249f8	Play_sound_from_3bin_mp3table1_stk(wSoundNum)
0x426f7c	Play_sound_from_3bin_forked_stk(wId)_return_bool_in_R0
	0x426f83	if over 0x190 (dec 400), get out 
	0x426f8d	if over 0xc8 (dec 200), translate with tbl_offsets_to_3bin_mp3tbl2 table and play from 3bin_mp3table2
	0x426fa9	if under 0xc8, translate with tbl_offsets_to_3bin_mp3tbl1 and play from 3bin_mp3table1
	0x426f96	tbl_offsets_to_3bin_mp3tbl2
	0x426fab	tbl_offsets_to_3bin_mp3tbl1
	0x40cd3b	tbl_num_to_3bin_string
	0x40cdc5	tbl_num_to_3bin_string
	0x40ce35	tbl_num_to_3bin_string
	0x40cea1	tbl_num_to_3bin_string
	0x40d331	tbl_num_to_3bin_string
	0x40d3bb	tbl_num_to_3bin_string
	0x40d42b	tbl_num_to_3bin_string
	0x40d497	tbl_num_to_3bin_string
	0x40ddef	tbl_num_to_3bin_string
	0x40de54	tbl_num_to_3bin_string
	0x40deb9	tbl_num_to_3bin_string
	0x40df16	tbl_num_to_3bin_string
	0x40e1c8	tbl_num_to_3bin_string
	0x40e218	tbl_num_to_3bin_string
	0x40e497	tbl_num_to_3bin_string


	0x4244bd	3bin ptr 0x030348 3b70
	0x4244c9	3bin ptr 0x03034a 000a
0x4244b2	ReadStringFrom3binString_tbl_stk(wIdx)_return_R1R0

	0x4201e1	3bin ptr 0x030200 0168
	0x4201ed	3bin ptr 0x030202 0078
	0x4201f9	3bin ptr 0x030204 0097
	0x420207	3bin ptr 0x030206 0400
	0x420216	3bin ptr 0x030208 FFFF
	0x420222	3bin ptr 0x03020a 0000
	0x42022e	3bin ptr 0x03020c 0304
	0x42023a	3bin ptr 0x03020e 0500
	0x42026b	3bin ptr 0x03020e 0500
	0x420277	3bin ptr 0x030210 0101
	0x420283	3bin ptr 0x030212 0400
	0x4202b4	3bin ptr 0x030212 0400
	0x4202c0	3bin ptr 0x030214 0206
	0x4202cc	3bin ptr 0x030216 0207
	0x4202fd	3bin ptr 0x030216 0207
	0x420309	3bin ptr 0x030218 0203
	0x420315	3bin ptr 0x03021a 0009
	0x420346	3bin ptr 0x03021a 0009
	0x420352	3bin ptr 0x03021c 0000
	0x42035e	3bin ptr 0x03021e 0000
	0x42038f	3bin ptr 0x0302fc 45F2
	0x42039b	3bin ptr 0x0302fe 0000

	0x415fa1	3bin unk[0c] 03e8 (dec:1000)
	0x415faf	3bin unk[0c] 03e8 (dec:1000)
	0x41ea46	3bin unk[10] 0000
	0x41ea6a	3bin unk[11] 0000
	0x41ea8e	3bin unk[12] 0000
	0x41eab2	3bin unk[13] 0000
	0x41ead6	3bin unk[14] 0000
	0x41eafa	3bin unk[35] 0000
	0x41eb1e	3bin unk[43] 0000
	0x41ed8a	3bin unk[03] 430e
	0x41ed94	3bin unk[02] 3a98 (dec:15000)
	0x41ed9c	3bin unk[04] 0026
	0x41edaf	3bin unk[02] 3a98 (dec:15000)
	0x41edb7	3bin unk[04] 0026
	0x41edca	3bin unk[06] 00de
	0x41edd2	3bin unk[00] 0064 (dec:100)
	0x41edda	3bin unk[06] 00de
	0x41ee00	3bin unk[07] 00cf
	0x41ee08	3bin unk[01] 0015
	0x41ee10	3bin unk[07] 00cf
	0x41ee80	3bin unk[03] 430e
	0x41ee88	3bin unk[04] 0026
	0x41ee9b	3bin unk[03] 430e
	0x41eea3	3bin unk[04] 0026
	0x41eeb6	3bin unk[0a] 00db
	0x41eebe	3bin unk[08] 0320 (dec:800)
	0x41eec6	3bin unk[0a] 00db
	0x41eeec	3bin unk[0b] 00cf
	0x41eef4	3bin unk[09] 001e
	0x41eefc	3bin unk[0b] 00cf
	0x426a5a	3bin unk[0d] 0006

	0x40bb00	sound 2/255, [empty or very short]
	0x40bb1c	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x40c0ed	sound 2/8, [skladbička]
	0x40c0ff	sound 2/9, [jingle 4]
	0x40d02f	sound 2/255, [empty or very short]
	0x40d04b	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x40d7f5	sound 2/8, [skladbička]
	0x40d807	sound 2/9, [jingle 4]
	0x40e289	sound 2/39, 沒有該曲目的聲音文件 There is no audio file for this track
	0x40e2c2	sound ??? TABLE 429ed7
	0x40e2fc	sound ??? TABLE 429ef7
	0x40e324	sound ??? TABLE 429ee7
	0x40e34c	sound ??? TABLE 429ee0
	0x40e375	sound ??? TABLE 429ef2
	0x40e39e	sound ??? TABLE 429eec
	0x40e3bf	sound ??? TABLE 429edd
	0x40e646	sound 2/257, 慢二 [Slow two]
	0x40e650	sound 2/256, 慢一点 slow one
	0x40e65a	sound 2/260, 正常语速 Normal speaking speed
	0x40e664	sound 2/262, 快一 [Quick one]
	0x40e66e	sound 2/263, 快二 [Quick two]
	0x40e678	sound 2/264, 快三 [Quick three]
	0x40e680	sound 2/259, 已是最快语速 [It’s the fastest speaking speed]
	0x40e6be	sound 2/261, 已是最慢语速 [It’s the slowest speaking speed]
	0x40e6c8	sound 2/258, 慢三 [Slow three]
	0x40e6d2	sound 2/257, 慢二 [Slow two]
	0x40e6dc	sound 2/256, 慢一点 slow one
	0x40e6e6	sound 2/260, 正常语速 Normal speaking speed
	0x40e6f0	sound 2/262, 快一 [Quick one]
	0x40e6fa	sound 2/263, 快二 [Quick two]
	0x40eb7b	sound 2/194 [jingle 7]
	0x40ec60	sound 2/255, [empty or very short]
	0x40ec7c	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x40efe6	sound 2/257, 慢二 [Slow two]
	0x40eff5	sound 2/256, 慢一 [Slow one]
	0x40f004	sound 2/260, 正常语速 [Normal speaking speed]
	0x40f013	sound 2/262, 快一 [Quick one]
	0x40f022	sound 2/263, 快二 [Quick two]
	0x40f031	sound 2/264, 快三 [Quick three]
	0x40f045	sound 2/194, [jingle 7]
	0x40f3e2	sound 2/8, [skladbička]
	0x40f3f4	sound 2/9, [jingle 4]
	0x40f407	sound 2/193, [jingle 6]
	0x4119ca	sound 2/255, [empty or very short]
	0x4119e6	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x411fed	sound 2/8, [skladbička]
	0x411fff	sound 2/9, [jingle 4]
	0x412861	sound 2/248, Nelze najít příslušný zvukový soubor
	0x41287e	sound 2/249, Dotkni se tlačítka nahrávání...
	0x412885	sound 2/247, Dotkni se tlačítka nahrávání...
	0x412f81	sound 2/255, [empty or very short]
	0x412f9d	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x413630	sound 2/8, [skladbička]
	0x413642	sound 2/9, [jingle 4]
	0x414350	sound 2/255, [empty or very short]
	0x41436c	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x41493a	sound 2/8, [skladbička]
	0x41494c	sound 2/9, [jingle 4]
	0x41545d	sound 2/255, [empty or very short]
	0x415479	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x4159fc	sound 2/8, [skladbička]
	0x415a0e	sound 2/9, [jingle 4]
	0x4166cb	sound 2/8, [skladbička]
	0x4166dd	sound 2/9, [jingle 4]
	0x416bf1	sound 2/255, [empty or very short]
	0x416c0d	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x416dc4	sound 2/251, Zopakuj to nahlas
	0x416e26	sound 2/250, Teď si to porovnej
	0x4182cd	sound 2/24, [jingle 5]
	0x4182e2	sound 2/20, 偏独 [Individual mode]
	0x4182f9	sound 2/24, [jingle 5]
	0x418318	sound 2/23, 复读 [Repeat]
	0x418335	sound 2/24, [jingle 5]
	0x418350	sound 2/19, 更读 [Read more]
	0x418365	sound 2/24, [jingle 5]
	0x41839e	sound 2/24, [jingle 5]
	0x4183c5	sound 2/24, [jingle 5]
	0x4183e5	sound 2/24, [jingle 5]
	0x418447	sound 2/24, [jingle 5]
	0x418450	sound 2/24, [jingle 5]
	0x4184e7	sound 2/8, [skladbička]
	0x4184f9	sound 2/9, [jingle 4]
	0x418ccb	sound 2/22, 录音停止 [Recording stops]
	0x41ce1b	sound 2/255, [empty or very short]
	0x41ce37	sound 2/254, Vyhledávám bluetooth zařízení pro spárování s tužkou
	0x41de1a	sound 2/231, 当前程序版本为V [The current program version is V]
	0x41de7f	sound 2/208-217, číslice čínsky 0-9
	0x41dea3	sound 2/218-223 nebo až 244?, anglicky spellovaná písmena A-F
	0x41dec7	sound 2/218-223 nebo až 244?, anglicky spellovaná písmena A-F
	0x41defe	sound 2/225, 筆頭測試成功 [The pen tip test was successful]
	0x41df05	sound 2/224, 比頭與主控MCU通訊不正常 [The communication between the header and the main controller MCU is not normal]
	0x41df33	sound 2/228, SD kartu nelze načíst
	0x41df3a	sound 2/229, CF卡测试成功 [CF card test successfully]
	0x41df90	sound 2/208-217, číslice čínsky 0-9
	0x41dfb5	sound 2/218-223, anglicky spellovaná písmena A-F, vypadá jako čtení hex čísel
	0x41dfd9	sound 2/208, 零 [Zero]
	0x41dff8	sound 2/208, 零 [Zero]
	0x41e814	sound 2/24, [jingle 5]
	0x4207fb	sound 2/228, SD kartu nelze načíst
	0x420844	sound 2/1, Proběhne aktualizace tužky
	0x4208c1	sound 2/228, SD kartu nelze načíst
	0x4237ce	sound 2/2, [jingle 1]
	0x4249d9	sound 2/228, SD kartu nelze načíst
	0x42530b	sound 2/206, 低点呀 [Lower it a bit]
	0x42535b	sound 2/226, 關機 [Shutdown]
	0x425574	sound 2/204, 起零 [Reset to Zero?]
	0x42558b	sound 2/227, 開始錄音 [Start recording]
	0x425596	sound 2/211, 三 [Three]
	0x4258bf	sound 2/252, [Ping] Spárování proběhlo úspěšně
	0x425c57	sound ??? TABLE/computation!
	0x425d04	sound 2/4 [jingle 3]
	0x425d12	sound 2/5 [jingle 3]
	0x425d20	sound 2/6 [jingle 3]
	0x425d2e	sound 2/7 [jingle 3]
	0x425d3c	sound 2/3 [jingle 2]
	0x425e01	sound ??? TABLE/computation!
	0x427eae	sound 2/207 测试模式 [Test Mode]


0x42343e	maybe_some_check_for_update_file
0x4222e3	Compute_2bin_pointers_stk(ptr_2bin,offset_sound)
0x40a474	naked_void_Zero_stk(variable)_and_F0_words_after_it()
0x428362	empty_fn_04
0x427f4e	naked_void_Zero_3fb5_set_3fa1_to_3fb4_to_FFFF()
0x42810f	safely_get_oid_mode_sndt_index__fallback_0
0x428120	safely_get_oid_mode_sndt_len__fallback_0
0x428131	safely_get_book_mode__fallback_0
0x428142	safely_get_temp_mode__fallback_0
0x428153	safely_get_int_format__fallback_5
0x427408	ensure_last_char(szDest,iCharacter)
0x423b9d	void_large_object_3d0b_creation_3d08_to_3d0a_clear(void)
0x427106	naked_void_setup_all_ports_and_something(void)
0x4281a5	naked_void_setup_port0_unk1(void)
0x4281b4	naked_void_setup_port0_unk2(void)
0x4281c3	naked_void_setup_port0_unk3(void)
0x428239	naked_void_setup_port4_unk1(void)
0x428245	naked_void_setup_port4_unk2(void)
0x428251	naked_void_setup_port4_unk3(void)
0x427dd1	naked_void_setup_port3_unk(void)
0x41e8ba	Init_indirect_functions_in_book_ctx_and_lots_of_other_stuff
0x424256	does_file_exist_stk(szPtr)
0x4207f4	label_when_sdcard_not_detected
	0x424fec	in this place we have prepared fname with sd:\ prefix
0x427fea	naked_set_adc_to_battery
0x4203d7	naked_set_adc_to_ain1__wait_for_result__return_in_R0
0x42660a	naked_check_test_mode_condition
0x427e07	safely_set_oid_mode_sndt_index(wSoundIndex)__return_success

	0x41e932	Play_sound_from_2bin_table_stk(sound_num)
	0x427740	tbl_dac_volume_values
	0x4278f0	tbl_dac_volume_values

0x42042a	lowlevel_button_recognition(void)
	0x420438	turn on button
	0x420465	low ADC value for resistor ladder
	0x420475	high ADC value for resistor ladder
	0x420496	resulting button number
0x4204ac	naked_first_time_button_recognition(void)
0x41de01	entering_the_test_mode(void)
0x41e0b9	test_mode_exiting
0x41de26	test_mode_version_looping
	0x41de2c	22 bytes from 0x400300 points to 023 (version number)
	0x41de56	copying 4 bytes to 0x3fa1
	0x41de64	from this point the copied version number in 0x3fa1 is read aloud
0x41de14	test_mode_stage_0_say_version
0x41de5d	test_mode_check_for_stage_1_plus
0x41de64	test_mode_stage_1_say_number
0x41deee	test_mode_check_for_stage_2_plus
0x41def6	test_mode_stage_2_test_tip
0x41df10	test_mode_check_for_stage_3_plus
0x41df18	test_mode_stage_5
0x41df20	test_mode_check_for_stage_8_plus
0x41df28	test_mode_stage_8_test_sdcard
0x41df48	test_mode_check_for_stage_9_plus
0x41df50	test_mode_stage_10
0x41e006	test_mode_check_for_stage_11_plus
0x41e00e	test_mode_stage_11_nothing
0x41e010	test_mode_check_for_stage_13_plus
0x41e018	test_mode_stage_13
0x41e06f	test_mode_check_for_stage_14_plus
0x41e077	test_mode_stage_14_testrec_saving
0x41e088	test_mode_check_for_stage_15_plus
0x41e090	test_mode_stage_15_testrec_playing_back_to


0x3c41	quiz_ctx
#3c41 = length c1, stored in 3d0b[5e]
#quiz_ctx[0x0] type
#quiz_ctx[0x1] write only?
#quiz_ctx[0x2] question count
#quiz_ctx[0x3] quiz length
#quiz_ctx[0x4] answer type: 0 - single, 1 - all, 2 - sequential
#quiz_ctx[0x5] intro OID
#quiz_ctx[0x6] write only?
#quiz_ctx[0x7] write only?
#quiz_ctx[0x8] after eval: 0 - error, 1 - correct, 2 - repeated. After find_wrong...: also index of wrong answer.
#quiz_ctx[0x9] error counter
#quiz_ctx[0xa] correct answer counter
#quiz_ctx[0xb] temporary index within OID list
#quiz_ctx[0xc] DW:start of list of pointers to questions
#quiz_ctx[0xe] 3*DW (96 bits): questions bitset
#quiz_ctx[0x14] questions asked counter
#quiz_ctx[0x15] quiz state
#quiz_ctx[0x16] sound choice randomizer value
#quiz_ctx[0x17] DW: for type 11: timer for repeating question
#quiz_ctx[0x19] DW: for type 11: question repeat timeout
#quiz_ctx[0x1b] correct answer counter
#quiz_ctx[0x1c] DW (32 bits): answers bitset
#quiz_ctx[0x1e] DW (32 bits): wrong answers bitset
#quiz_ctx[0x20] current question index
#quiz_ctx[0x21] OID for types 2, 3: partial success
#quiz_ctx[0x22] OID for types 2, 3: error within tolerance
#quiz_ctx[0x23] OID for types 2, 3: question fail
#quiz_ctx[0x24] OID for types 2, 3: question success
#quiz_ctx[0x25] OID for type 2: question
#quiz_ctx[0x26] for types 4+: controls sound choice: 0 - random, 1 - answer index, 2 - correct answer counter
#quiz_ctx[0x27] for types 4+: 1 requires answers in order
#quiz_ctx[0x28] for types 4+: separate wrong answer tolerance, default 3
#quiz_ctx[0x29] answer count
#quiz_ctx[0x2a] for types 4+: length of table 33
#quiz_ctx[0x2b] for types 4+: length of table 35
#quiz_ctx[0x2c] for types 4+: length of table 37
#quiz_ctx[0x2d] for types 4+: length of table 39
#quiz_ctx[0x2e] for types 4+: length of table 3b
#quiz_ctx[0x2f] for types 4+: length of table 3d
#quiz_ctx[0x30] for types 4+: length of table 3f
#quiz_ctx[0x31] list of answers (file offset)
#quiz_ctx[0x33] list of wrong answers
#quiz_ctx[0x35] OIDs for correct responses + 1
#quiz_ctx[0x37] OIDs for explicitly wrong answers
#quiz_ctx[0x39] OIDs for repeated answers
#quiz_ctx[0x3b] OIDs for other errors
#quiz_ctx[0x3d] OIDs for correct answer on last question
#quiz_ctx[0x3f] OIDs for error above tolerance (either kind)
#quiz_ctx[0x41] wrong answer counter
#quiz_ctx[0x42] temporary index within OID list
#quiz_ctx[0x43+x] for types (0),1,6,9: list of question choice OIDs (up to length 0x60)
#quiz_ctx[0xa3] 1 for type 8, 2 for type 5, otherwise 0 (these otherwise overwritten to type 4) - questions in order
#quiz_ctx[0xa4] unused?
#quiz_ctx[0xa5] for type 7: number of sub-quizzes, must be 1
#quiz_ctx[0xa6] for type 7: subquiz index, must be 0
#quiz_ctx[0xa7] unused?
#quiz_ctx[0xa8] unused?
#quiz_ctx[0xa9] unused?
#quiz_ctx[0xaa] for type 7: 1 picks questions in order, 0 randomly
#quiz_ctx[0xab] for type 7: subquiz tolerance
#quiz_ctx[0xac] DW:for type 7: subquiz pointer
#quiz_ctx[0xae] for type 7: write only?
#quiz_ctx[0xaf] for type 7: subquiz intro OID
#quiz_ctx[0xb0] for types 9,10,11: time allowance
#quiz_ctx[0xb1] for type 11: write only?
#quiz_ctx[0xb2] for types 9,10,11: OID for low time left
#quiz_ctx[0xb3] for types 9,10,11: OID for time out
#quiz_ctx[0xb4] for types 9,10: time countdown
#quiz_ctx[0xb5] for types 9,10,11: countdown active?
#quiz_ctx[0xb6] 1 for type a: error OID indexed by error counter
#quiz_ctx[0xb7] for type 11: time countdown
#quiz_ctx[0xb8] for type 11: time allowance
#quiz_ctx[0xb9] for type 11: unforgiving mode?
#quiz_ctx[0xba] for type 11: 0 - normal, 1 - questions in order, 2 - questions chosen by user
#quiz_ctx[0xbb] unused?
#quiz_ctx[0xbc] for type 11: countdown active
#quiz_ctx[0xbd] for type 11: error OID indexed by error counter
#quiz_ctx[0xbe] for type 11: quiz evaluation size
#quiz_ctx[0xbf] for type 11: OID list for quiz evaluation
#quiz_ctx[0xc0] tolerance

#not sure why the indirection when it's singleton (even the singleton itself is overkill, when it could be bunch of globals)
0x3d6a	ptr_to_book_ctx
0x3d05	num_files_bnl
0x3d06	file_handle_bnl
0x3d0b	book_ctx
#book_ctx[0x0] word file handle
#book_ctx[0x1] dword current OID
#book_ctx[0x3] dword last played OID
#book_ctx[0x5] word book mode
#book_ctx[0x6] temp mode (for choosing sound table from OID)
#book_ctx[0x7] = 02 number of temp modes to cycle through on repeated OID if book mode == 0
#book_ctx[0x8] = 00
#book_ctx[0x9] OID/tempmode sound table length
#book_ctx[0xa] OID/tempmode sound table start
#book_ctx[0xc] OID/tempmode sound table index
#book_ctx[0xd] last sound table start
#book_ctx[0xf] last sound table length
#book_ctx[0x10] repeat counter
#book_ctx[0x11] repeat max
#book_ctx[0x12] = 00
#book_ctx[0x13] = 00 -> bytekey1 for ptr_encrypt (0 for BNL)
#book_ctx[0x14] = 00 -> bytekey2 for ptr_encrypt (0 for BNL)
#book_ctx[0x15] header_key
#book_ctx[0x17+x] 16*W MP3 key
#book_ctx[0x2a] current quiz index
#book_ctx[0x2b] int_format (4 for BNL)
#book_ctx[0x2c] = FFFF, FFFF -> value from 3.bin +3020f: 00010105 - magic values for determining int_format
#book_ctx[0x2e] = FFFF, FFFF -> value from 3.bin +30213: 07020604
#book_ctx[0x30] = FFFF, FFFF -> value from 3.bin +30217: 09020302
#book_ctx[0x32] = FFFF, FFFF -> value from 3.bin +3021b: 00000000
#book_ctx[0x34] = 00,05 -> bitfield for enabling vendor-locked functions according to fw config
#book_ctx[0x36] = 00,00 -> bitfield for enabling int_formats according to fw config (bit 7/0x80: BNL)
#book_ctx[0x39] pointer to OID table in file (recalculated every time in find_oid_sound_tables but stored here nevertheless)
#book_ctx[0x3b] oid_min
#book_ctx[0x3c] oid_max
#book_ctx[0x3d] quiz count
#book_ctx[0x4c] = 0x428365 (just retff) -> lib_seek_stk(pFile,dwPtr,wWhence)_return?
#book_ctx[0x4e] = 0x428365 (just retff)
#book_ctx[0x50] = 0x428365 (just retff) -> lib_fgetw_stk(pFile,wBuffer)_return?
#book_ctx[0x52] = 0x428365 (just retff) -> lib_fgetdw_stk(pFile,wBuffer)_return?
#book_ctx[0x54] = 0x428365 (just retff) -> probably_mp3_player_stk(pFile,dwOffset,dwLen,wFlag)
#book_ctx[0x56] = 0x428365 (just retff) -> naked_MP3_GetStatus_is_PLAY()_return_bool_in_R0
#book_ctx[0x58] = 0x428365 (just retff) -> naked_MP3_GetStatus_is_PAUSE()_return_bool_in_R0
#book_ctx[0x5a] = 0x428365 (just retff) -> mp3_stop()
#book_ctx[0x5c] -> 0x422324 Play_sound_from_2bin_table_stk(sound_num)
#book_ctx[0x5e] = pointer to quiz structure (0x3c41)

0x004035	FS_DirRead(pDir)
0x0045e1	determine_int_format_from_header(pData)
0x004dff	SN95302_ParsingData(&flag,&data1,&data2)
0x005f6b	count_books__preload_50_book_ids(pDir,szFileExt)
0x006162	get_book_id_from_header(pData)
0x006553	ptr_encrypt(ptr,bytekey1,bytekey2,dwkey,loc)
0x006859	bytewise_xor2keys(key1,key2,dword)
0x006dc0	map_id2ptr_stk(map_id)_ptr_in_R0
0x006e5f	FS_DirGetExtFile_wrapper(pDir,wIndex,szFileExt)
0x006f50	delay_us(microseconds)
0x40e610	mp3_temp_speed_up()
0x40e68a	mp3_temp_speed_down()
0x40e966	kill_repeat()
0x400158	advance_soundtable_or_oid_or_soundqueue()
0x40e704	da_fu_weng_find_unplayed_sound(wBitset,wLength)
0x40e748	da_fu_weng_get_next_sound_index(wOID)
0x410000	quiz_state_react(oid)
0x417277	read_quiz(quiz_index)
0x418f6e	load_question_types_4,5,6,8,9,a,10,11()
0x419601	determine_int_format_from_handle(file)
0x41b379	load_question_type_7_return_oid()
0x41b82a	init_encrypt(file,&bytekey1,&bytekey2,&dwkey)
0x41bc72	autoadvance_oid_play_first()
0x41c05a	oid_to_fwcode(dw_oid)
0x41d4f6	quiz_time_step_1Hz()
0x41e0bd	find_book(wFlag,wBokId)
# flag = 1: find book with given id
# flag = 2: next BNL (ignore id)
# flag = 3: previous BNL (ditto)
0x41eb57	start_quiz()
0x41ef76	finalize_mp3_key(pKeyIn,pKeyOut,dwArg1,dwArg2)
0x41f179	play_bnl_mp3(index)
0x41f561	check_battery()
#In FW v1 this function only checks battery voltage and sets runlevel to 1 if 
#low. In v2 it has significantly more logic, detecting sudden voltage drops and 
#optionally (FW bit) adapting the thresholds on MP3 playing (system load?), but 
#ultimately does the same.
0x41f74c	evaluate_answer_types_4,5,6,7,8,9,a,10,11_or_question(oid)
0x41fcf9	locate_oid_mode_sound_table(file,off_tables_start,mode,&sndt_length,&sndt_start)
0x4201dd	read_fw_configuration()
0x4204cb	check_button_state()
0x420c1c	autoadvance_oid_play_next()
0x420da8	find_temp_bookmode_and_sound_table(sndts_start)
0x420f2e	init_book(pFile)
0x4210b0	play_system_sound(wId)
#The id is a number between 0 and 399 (decimal) with the same meaning as in Play_sound_from_3bin_forked_stk. HOWEVER:
#- A check is done on a yet unassigned bitfield, which skips some sounds (generally jingles - silent mode?)
#- For some indices the call is first made to play_system_sound_from_bnl, and only when it returns 0,
#  Play_sound_from_3bin_forked_stk is called.
#- This allows for overriding various system sounds with a fallback to 3.bin.
#- This is always ON for the following indices:
#  - 2: book intro (map_id 04)
#  - 13: mode intros (map_id 0a)
#  - 18: unknown sound 0x58 (map_id 2d)
#  - 24 to 28: quiz success/fail sounds (except 0xa0 "question success" and 0xa4 "repeated")
#  - 2c: quiz wrap-up (map_id 4d)
#  - 2f: changed to 0 (book intro 2, map_id 05) before playing
#- It is always OFF for:
#  - 17: error loading book
#- Whether ON or OFF is controlled by a bit in FW config variable @ 0x30204 (OFF in our version)
#  for all other values less than 32 (50 decimal):
#  - 1: map_id 06: unknown sound 0x14 (leave book?)
#  - 3: 23: 0x60 (battery low)
#  - 4: 0f: 0x98 (error loading file)
#  - 5: 22: 0x78 (no MP3)
#  - 6: 21: 0x84 (?)
#  - 7: 20: 0x80 (compare)
#  - a: 09: 0x20 (memory full)
#  - b: 0b: 0x28 (?)
#  - 10: 0e: 0x64 (?)
#  - 11: 5d: 0x64 (?)
#  - 12: 57: 0x64 (?)
#  - 16: 26: 0x94 (?)
#  - and other values which are not part of int_format=4 BNL header.
0x42163e	quiz_react_to_oid(oid)
0x421792	get_quiz_sound(map_id,pick_random)
0x42138a	read_type_7_subquiz()
0x4214e6	find_oid_sound_tables(oid,&sndts_start)
0x422079	play_sound_from_table_at_book_ctx[0xa](index)
0x42296f	init_book_modes()
0x422a78	evaluate_answer_types_0,3_or_question(oid)
0x42306e	get_next_question_index()
0x423164	get_first_question_index()
0x423d5e	play_system_sound_from_bnl(wId)
#Only called from play_system_sound(id), see documentation there.
	0x423d6a	tbl_syssound_id_to_map_id
0x42370d	time_step_10Hz()
0x4239d7	play_oid_sndt_index(oid,sound_index)
0x423e3a	play_oid_sndt_from_start(oid)
0x423fe9	autoadvance_play_next_oid()
0x4240bc	autoadvance_play_prev_oid()
0x42418a	find_wrong_answer_by_oid(oid)
0x4247bf	play_current_oid_mode_1()
0x424ab4	open_dir(szDirName)
0x424cdb	initiate_poweroff()
0x424e2e	load_question_types_0,1,3()
0x4251d6	get_next_random_question()
0x425385	repeat_last_oid(wNumTimes)
0x4256ae	button_to_fwcode(button,is_long,mode)
0x4256eb	b2fw_is_long
0x4256d4	b2fw_is_short_odd_mode
0x42570c	b2fw_is_long_odd_mode
0x425729	b2fw_final_result
0x425727	b2fw_invalid_result
0x42572e	find_next_nonempty_mode_within(oidt_start,size)
0x4258a1	poll_interrupts()
0x425995	read_book_modes()
0x425a0f	read_book_id()
0x425a89	prepare_questions_bitset(num_questions)
0x425b76	replay_last_soundtable()
0x425c5f	find_answer_by_oid(oid)
0x425cd3	set_bedtime_timer_by_oid(wOID)
0x425f06	read_3bin_tbl_unk(index)
0x425f75	get_file_ext_uppercase(pDirEnt,pBuffer)
0x425fe3	evaluate_answer_sequential(ans_index)
0x426051	set_mode_0_play_oid(oid)
0x4260bf	prepare_answers_bitset(num_answers)
0x42612c	prepare_wrong_answers_bitset(num_answers)
0x426199	evaluate_answer_type_2(oid)
0x426349	replay_last_sound()
0x4265a9	reduce_to_within(value,size)
0x42666a	R0=arg1_div_arg2()
0x4267e3	set_book_mode_by_fwcode
0x426840	locate_question_in_bnl(q_index)
0x42689c	volume_increase()__return_is_max
0x4269a9	choose_equalizer_preset(wPreset)_probably
0x426aa8	volume_decrease()__return_is_min
0x426b4f	get_table_element(table,index)
0x426ba1	init_quiz_ctx()
0x426bf3	get_question_header_word+2(q_index)
0x426d7b	get_question_header_word+0(q_index)
0x426e12	find_question_by_oid(oid)
0x426e5c	volume_cycle_up()
0x426ea5	volume_cycle_down()
0x427046	answers_bit_clear(ans_index)
0x427086	wrong_answers_bit_clear(ans_index)
0x4270c6	is_questions_bitset_defaulted()
0x427145	set_mode_0_forget_last_oid()
0x427183	count_files_bnl__save_in_global()
0x427237	questions_bit_set(q_index)
0x427273	xor_two_byte_keys(key1,key2,value)
0x427322	answers_bit_check_zero(ans_index)
0x42735c	wrong_answers_bit_check_zero()
0x427396	questions_bit_get(q_index)
0x427440	quiz_state_react_if_not_playing()
0x4274af	set_bedtime_timer(wMinutes)
0x427554	are_all_answers_marked()
0x42751d	clear_answers_bitset()
0x4275c1	next_book_mode()
0x427759	check_inactivity_timer()
0x427789	is_any_volume_sound_playing()
0x4277b9	play_volume_unchanged_sound()
0x427819	play_volume_up_sound_fallback_volume_down()
0x427848	play_volume_down_sound_fallback_volume_up()
0x427903	check_poweroff_timer()
0x4279e0	locate_type7_curr_subquiz_question(index)
0x427a0a	play_volume_max_sound_fallback_volume_up()
0x427a32	play_volume_min_sound_fallback_volume_down()
0x427a5a	bedtime_timeout_reached()
0x427a80	set_mp3_speed(wSpeedIndex)
0x427aa5	is_system_sound_playing(wId)
0x427bc1	set_quiz_ctx_pointer()
0x427c4a	set_mp3_temp_speed_higher()
0x427c6b	set_mp3_temp_speed_lower()
0x427c8c	clear_inactivity_timers()
0x427cca	xor_one_byte_key(data,key)
0x427ce9	set_last_sound(wType,dwValue)
0x427d26	set_mp3_speed_from_stored_value()
0x427d7d	try_shutdown_OID()
0x427dec	mp3_or_pcm_resume()
0x427ebd	mp3_or_pcm_pause()
0x427f37	stop_and_skip_rest_of_soundtable()
0x427f65	hw_random(void)_ret_in_R0
0x427fa8	OID_close()
0x427fbe	mp3_stop()
0x4280a2	init_quiz_state_0()
0x4280fe	get_num_quizzes()
0x428213	play_sound_0x58()
0x42825d	set_mp3_speed_normal()
0x428268	OID_close_unconditionally()

0x41026e	quiz_answer_type_3
0x410404	quiz_answer_types_0,1
0x41073e	quiz_answer_type_2
0x410831	quiz_answer_types_4,5,6,8,9,a,10,11
0x410e80	quiz_answer_type_7

	0x006ddf	tbl_map_id_to_location
	0x426810	tbl_fwcode_to_mode
	0x41bb9a	tbl_MP3_byte_offsets
	0x004656	tbl_encrypt_permutation
	0x004705	tbl_encrypt_permutation
	0x0047a0	tbl_encrypt_permutation
	0x004977	tbl_encrypt_permutation
	0x0061d4	tbl_encrypt_permutation
	0x0061eb	tbl_encrypt_permutation
	0x4196b1	tbl_encrypt_permutation
	0x4197bb	tbl_encrypt_permutation
	0x41988f	tbl_encrypt_permutation
	0x419aa1	tbl_encrypt_permutation
	0x41b8e1	tbl_encrypt_permutation
	0x41b8ff	tbl_encrypt_permutation
	0x41b98a	tbl_encrypt_permutation
	0x41b9a3	tbl_encrypt_permutation
	0x41b9c2	tbl_encrypt_permutation_other
	0x41b9dd	tbl_encrypt_permutation_other
	0x421c2c	tbl_encrypt_permutation
	0x421c43	tbl_encrypt_permutation
	0x421eaf	tbl_encrypt_permutation
	0x421ec6	tbl_encrypt_permutation
	0x423878	tbl_encrypt_permutation
	0x42388f	tbl_encrypt_permutation
	0x0047ac	tbl_encrypt_permutation_other[2]
	0x004983	tbl_encrypt_permutation_other[2]
	0x0061f7	tbl_encrypt_permutation_other[2]
	0x41989b	tbl_encrypt_permutation_other[2]
	0x419aad	tbl_encrypt_permutation_other[2]
	0x41b910	tbl_encrypt_permutation_other[2]
	0x421c4f	tbl_encrypt_permutation_other[2]
	0x421ed2	tbl_encrypt_permutation_other[2]
	0x42389b	tbl_encrypt_permutation_other[2]
	0x004662	tbl_encrypt_permutation_other[0x16]
	0x004711	tbl_encrypt_permutation_other[0x16]
	0x0061e0	tbl_encrypt_permutation_other[0x16]
	0x4196bd	tbl_encrypt_permutation_other[0x16]
	0x4197c7	tbl_encrypt_permutation_other[0x16]
	0x41b8f2	tbl_encrypt_permutation_other[0x16]
	0x421c38	tbl_encrypt_permutation_other[0x16]
	0x421ebb	tbl_encrypt_permutation_other[0x16]
	0x423884	tbl_encrypt_permutation_other[0x16]


0x42591b	probably_mp3_player_stk(pFile,dwOffset,dwLen,wFlag)
	0x42591b	pFile could be 0, it may mean playing from fw? wFlag seen 0, 1, 2

0x4264e2	main_mode_dispatch
	0x4264fa	main_mode_process
	0x426513	main_mode_leave
	0x42652a	main_mode_enter

0x4263b2	main_mode_enter
0x428029	main_mode_enter.0
0x40fce8	main_mode_enter.1
0x413bf0	main_mode_enter.2
	0x413bfb	"sd:\"
	0x413c0f	"mp3"
	0x413c59	no sound
	0x413c67	"Není nahraná žádná hudba."
0x415fc6	main_mode_enter.3
	0x415fcc	"sd:\Rec"
	0x415fda	"wav"
	0x416027	"sd:\Rec"
0x41706e	main_mode_enter.4
0x42808f	main_mode_enter.5
0x40c6e2	main_mode_enter.6
0x412941	main_mode_enter.8
0x414e2c	main_mode_enter.9
0x427ea4	main_mode_enter.a
0x40e197	main_mode_enter.b
0x427930	main_mode_enter.c
	0x427951	"Nemohu přečíst..."
0x400067	main_mode_enter.d.noop

0x426418	main_mode_process
0x4257ab	main_mode_process.0
	0x4257b9	power on jingle
	0x425803	"Vítej ve světě..."
	0x42580a	"Nemohu přečíst..."
0x40fd43	main_mode_process.1
0x413c93	main_mode_process.2
0x41611c	main_mode_process.3
0x41717b	main_mode_process.4
0x42263e	main_mode_process.5
0x40c706	main_mode_process.6
0x412989	main_mode_process.8
0x414ed4	main_mode_process.9
0x422f77	main_mode_process.a
0x40e41d	main_mode_process.b
0x4243ea	main_mode_process.c
0x428360	main_mode_process.d.noop

0x42647d	main_mode_leave
0x428361	main_mode_leave.0.noop
0x40fd10	main_mode_leave.1
0x413c71	main_mode_leave.2
0x4160e7	main_mode_leave.3
0x41712e	main_mode_leave.4
0x428364	main_mode_leave.5.noop
0x40c6f7	main_mode_leave.6
0x412968	main_mode_leave.8
0x414ea3	main_mode_leave.9
0x428067	main_mode_leave.a
0x40e3d0	main_mode_leave.b
0x42762b	main_mode_leave.c
0x42835f	main_mode_leave.d.noop

0x40ed07	process_oid_fwcode.1(wCode)
0x40e97a	process_button_fwcode.1(wCode)
0x413022	process_oid_fwcode.2(wCode)
0x412bc7	process_button_fwcode.2(wCode)
0x4154eb	process_oid_fwcode.3(wCode)
0x4151aa	process_button_fwcode.3(wCode)
0x4161ca	process_oid_fwcode.4(wCode)
0x41694c	process_button_fwcode.4(wCode)
#no OID/button in main_mode 5(wCode)
0x40bb8e	process_oid_fwcode.6(wCode)
0x40b85b	process_button_fwcode.6(wCode)
#main_mode 7 doesn't exist
0x411a58	process_oid_fwcode.8(wCode)
0x411725	process_button_fwcode.8(wCode)
0x4143de	process_oid_fwcode.9(wCode)
0x4140ab	process_button_fwcode.9(wCode)
#no OID/button in main_mode a
0x40d0d6	process_oid_fwcode.b(wCode)
0x40cbb9	process_button_fwcode.b(wCode)
0x417da3	process_oid_fwcode.c(wCode)
0x41cb3f	process_button_fwcode.c(wCode)
#mode d is no-op

0x40f6ee	main_mode_action.1()
0x4138af	main_mode_action.2()
0x415c7d	main_mode_action.3()
0x416ce2	main_mode_action.4()
0x40c375	main_mode_action.6()
0x412302	main_mode_action.8()
0x414bdd	main_mode_action.9()
#0x41de01	main_mode_action.a() = entering_the_test_mode(void)
0x40dd4f	main_mode_action.b()
0x41878c	main_mode_action.c()

#0x424cdb	main_mode_process_epilog.5() = initiate_poweroff()
0x424d86	main_mode_process_epilog.2()
0x424ed5	main_mode_process_epilog.default()
0x4252f7	main_mode_process_epilog.a()

0x40e644	speed_slow_two
0x40e64e	speed_slow_one
0x40e658	speed_normal_speaking
0x40e662	speed_quick_one
0x40e66c	speed_quick_two
0x40e676	speed_quick_three
0x40e680	speed_fastest
0x40e686	speed_end_of_processing

0x40e6be	speed2_slowest
0x40e6c6	speed2_slow_three
0x40e6d0	speed2_slow_two
0x40e6da	speed2_slow_one
0x40e6e4	speed2_normal_speaking
0x40e6ee	speed2_quick_one
0x40e6f8	speed2_quick_two
0x40e700	speed2_end_of_processing

0x429d35	string_rb+
0x429cd5	string_wb+
0x429f9a	string_SystemVoiceData.bin
0x429f0c	string_r_1
0x429f2a	string_r_2
0x429f2c	string_w+_1
0x429f2f	string_sd:0:\filmRecFile.wav
0x429f45	string_r_3
0x429f47	string_r_4
0x429f49	string_w+_2
0x429f4c	string_\Rec000.wav
0x429f58	string_\00000Rec000.wav
0x429f69	string_\Rec000.wav_1
0x429f75	string_sd:\Rec
0x429f7d	string_updateok
0x429f86	string_r_5
0x429f88	string_sd:0:\updateA.chp_1
0x429fb2	string_r_6
0x429fb4	string_r_7
0x429fb6	string_sd:\DICT\TN_Dict.bin
0x429fcb	string_r_8
0x429fcd	string_w+_3
0x429fd0	string_sd:0:\TESTREC.WAV
0x429fe2	string_w+_4
0x429fe5	string_r+_9
0x429fe7	string_sd:\StuRec.wav
0x429ff6	string_sd:0:\updateA.chp_2
0x429d64	string_sd:\Game
0x429d5d	string_.txt
0x429d62	string_backslash
0x42a03e	string_.tn2
0x42a043	string_backslash_2
0x42a045	string_r_10
0x42a04d	string_r_11
0x42a04f	string_r_12
0x42a019	string_w+_5
0x42a01c	string_r_13
0x42a01e	string_\xxxx.wav
0x429f0e	string_CHOMPTECH_DATA_FORMAT_2
0x429ebf	string_sd:\Game_2
0x429ec8	string_sd:\Dict
0x429ebb	string_txt
0x429eaa	string_txt_2

0x4297e4	dbgstring_playvoicetotaltimes_%d
0x429803	dbgstring_pfjim->PlayVoiceTimes:%d
0x42981d	dbgstring_AutoSwitchFlag:%x
0x429830	dbgstring_pfjim->EnableSwitchLanguage:%d
0x429850	dbgstring_pfjim->TempLanguage:%d
0x429868	dbgstring_oidtemp.Word[0]:%d
0x429b3d	dbgstring_Haven't_looked_for_it
0x429b47	dbgstring_Have_been_found
0x429b4f	dbgstring_q_ifcorrect:%d
0x429b5f	dbgstring_oidtemp.Word[0]:%d_2
0x429b73	dbgstring_AnswerOrderFlag:%d
0x429b8f	dbgstring_RightAnswerNumbe:%d
0x429bb0	dbgstring_oidtemp.Word[0]:%d_3
0x429bc4	dbgstring_aa:%d
0x429bcb	dbgstring_pfjim->TestPrint->WrongAnswerNumber:%d
0x429bf3	dbgstring_OidCode:%d
0x429bff	dbgstring_OtherWrongVoiceNumber:%d
0x429c19	dbgstring_have_been_found:%d
0x429c24	dbgstring_correct_number_of_voices:%d
0x429c3c	dbgstring_VoiceNumber:%d
0x429c4c	dbgstring_pfjim->TestPrint->Find0OrAllAnswer:%d
0x429c73	dbgstring_DaFuWengModefg:%d
0x429c86	dbgstring_g_OidReceiveData:%x
0x429c9b	dbgstring_********************
0x429cb1	dbgstring_DaFuWengModefg:%d_2
0x429cc4	dbgstring_OidFuncValue:%d
0x429cd9	dbgstring_write_MemoryNum:%d
0x429ced	dbgstring_which_voiceoffset:%d
0x429d0b	dbgstring_read_MemoryNum:%d
0x429d21	dbgstring_read_gBuf[1]:%d
0x429d39	dbgstring_audio_TotalNum:%d
0x429d50	dbgstring_FilePath:%s
0x429e9a	dbgstring_pFilePath=%s
0x429eae	dbgstring_TxtNum:%d

0x417869	some_indirectly_called_function_417869
0x4192bd	some_indirectly_called_function_4192bd
0x419340	some_indirectly_called_function_419340
0x4193cb	some_indirectly_called_function_4193cb
0x419456	some_indirectly_called_function_419456
0x4194ca	some_indirectly_called_function_4194ca
0x419555	some_indirectly_called_function_419555
0x4195c9	some_indirectly_called_function_4195c9
0x41b539	some_indirectly_called_function_41b539
0x41b5ad	some_indirectly_called_function_41b5ad
0x41b621	some_indirectly_called_function_41b621
0x41b695	some_indirectly_called_function_41b695
0x41b709	some_indirectly_called_function_41b709
0x41b77d	some_indirectly_called_function_41b77d
0x41b7f1	some_indirectly_called_function_41b7f1
0x42650d	some_indirectly_called_function_42650d
0x426526	some_indirectly_called_function_426526
0x42653d	some_indirectly_called_function_42653d
0x426b1f	some_indirectly_called_function_426b1f

0x40bb5a	handler_button_fwcode.6_other
0x40bb66	handler_button_fwcode.6_90_to_af_modes
0x40bb78	end_of_button_fwcode_handling.6

0x40bd75	switch_handler_oid_fwcode.6_30_volplus
0x40bd83	switch_handler_oid_fwcode.6_31_volminus 
0x40bd9d	switch_handler_oid_fwcode.6_40_mp3
0x40bda9	switch_handler_oid_fwcode.6_42_mp3_pause
0x40bdad	switch_handler_oid_fwcode.6_43_mp3_play 
0x40bdb1	switch_handler_oid_fwcode.6_44_mp3_stop 
0x40bdb5	switch_handler_oid_fwcode.6_45_mp3_next 
0x40bdb9	switch_handler_oid_fwcode.6_46_mp3_prev 
0x40bde8	switch_handler_oid_fwcode.6_50_compare
0x40bd4c	handler_oid_fwcode.6_00
0x40bd59	handler_oid_fwcode.6_10_bookid
0x40bd69	handler_oid_fwcode.6_11
0x40bd71	handler_oid_fwcode.6_12
0x40be0c	switch_handler_oid_fwcode.6_80_stop
#0x40bc5f	Switch_on_60_to_62
0x40bdf8	handler_oid_fwcode.6_60
0x40be00	handler_oid_fwcode.6_61
0x40be04	handler_oid_fwcode.6_62
0x40be3c	handler_oid_fwcode.6_b0
#0x40bc79	Switch_on_f01_to_f16
#0x40bcae	Switch_on_400_to_408
#0x40bcd6	Switch_on_108_to_10c
#0x40bcfa	Switch_on_501_to_504
#0x40bd0f	Switch_on_2000_and_above
#0x40bd3d	Switch_on_7000_and_above
0x40c0e2	handler_oid_fwcode.6_501
0x40c0f4	handler_oid_fwcode.6_502
0x40c106	handler_oid_fwcode.6_404_to_408
0x40bd50	handler_oid_fwcode.6_504
0x40c086	handler_oid_fwcode.6_201d
0x40c08a	handler_oid_fwcode.6_2020
0x40c05f	handler_oid_fwcode.6_2000
0x40c07e	handler_oid_fwcode.6_2001
0x40c082	handler_oid_fwcode.6_2002
0x40c08e	handler_oid_fwcode.6_7000
0x40c092	handler_oid_fwcode.6_7001
0x40c10d	handler_oid_fwcode.6_other_and_ranges
0x40c35f	end_of_oid_fwcode_handling.6

0x40c6db	default_on_penstate_handling.6
0x40c6de	end_of_penstate_handling.6

#0x40cbb9	switch_over_fwcodes_stk(fwcode)
0x40cf1d	handler_button_fwcode.b_60
0x40cf25	handler_button_fwcode.b_61
0x40cf29	handler_button_fwcode.b_62
0x40cccf	handler_button_fwcode.b_10_or_20_shutdown
0x40ccc3	handler_button_fwcode.b_11
0x40cc38	switch_on_button_fwcode.b_c0_to_c3
0x40cc58	switch_on_button_fwcode.b_70_to_85
0x40cc8a	switch_on_button_fwcode.b_e0_to_ec
0x40cccb	handler_button_fwcode.b_ff
0x40d0a2	handler_button_fwcode.b_other
0x40d0ae	handler_button_fwcode.b_90_to_af_modes
0x40d0c0	end_of_button_fwcode_handling.b

0x40d2ce	switch_handler_oid_fwcode.b_30_volplus
0x40d2dc	switch_handler_oid_fwcode.b_31_volminus
0x40d2f6	switch_handler_oid_fwcode.b_40_mp3
0x40d37e	switch_handler_oid_fwcode.b_42_mp3_pause
0x40d388	switch_handler_oid_fwcode.b_43_mp3_play
0x40d408	switch_handler_oid_fwcode.b_44_mp3_stop
0x40d40c	switch_handler_oid_fwcode.b_45_mp3_next
0x40d478	switch_handler_oid_fwcode.b_46_mp3_prev
0x40d516	switch_handler_oid_fwcode.b_50_compare
0x40d2a5	handler_oid_fwcode.b_00
0x40d2b2	handler_oid_fwcode.b_10_bookid
0x40d2c2	handler_oid_fwcode.b_11
0x40d2ca	handler_oid_fwcode.b_12
0x40d573	switch_handler_oid_fwcode.b_80_stop
0x40d526	handler_oid_fwcode.b_60
0x40d52e	handler_oid_fwcode.b_61
0x40d532	handler_oid_fwcode.b_62
0x40d5a3	handler_oid_fwcode.b_b0
0x40d7ea	handler_oid_fwcode.b_501
0x40d7fc	handler_oid_fwcode.b_502
0x40d2a9	handler_oid_fwcode.b_504
0x40d78e	handler_oid_fwcode.b_201d
0x40d296	handler_oid_fwcode.b_2020
0x40d767	handler_oid_fwcode.b_2000
0x40d786	handler_oid_fwcode.b_2001
0x40d78a	handler_oid_fwcode.b_2002
0x40d796	handler_oid_fwcode.b_7000
0x40d79a	handler_oid_fwcode.b_7001
0x40d815	switch_on_oid_fwcode.b_other_and_ranges
0x40da5e	end_of_oid_fwcode_handling.b

0x40e190	default_on_penstate_handling.b
0x40e193	end_of_penstate_handling.b

0x40ea95	handler_button_fwcode.1_ff
0x40eb1e	handler_button_fwcode.1_60
0x40eb28	handler_button_fwcode.1_61
0x40eb2c	handler_button_fwcode.1_62
0x40ea99	handler_button_fwcode.1_10_or_20_shutdown
0x40ea8b	handler_button_fwcode.1_11
0x40ecd1	handler_button_fwcode.1_90_to_af_modes
0x40ea00	switch_on_button_fwcode.1_c0_to_c3
0x40ea20	switch_on_button_fwcode.1_70_to_85
0x40ea52	switch_on_button_fwcode.1_b0_to_ec
0x40ecf1	end_of_button_fwcode_handling.1

0x40eef8	handler_oid_fwcode.1_0
0x40ef07	handler_oid_fwcode.1_10
0x40ef19	handler_oid_fwcode.1_11
0x40ef23	handler_oid_fwcode.1_12
0x40efb8	handler_oid_fwcode.1_60
0x40efc2	handler_oid_fwcode.1_61
0x40efc6	handler_oid_fwcode.1_62
0x40f086	handler_oid_fwcode.1_b0
0x40f415	handler_oid_fwcode.1_404_to_408
0x40f266	handler_oid_fwcode.1_2000
0x40f287	handler_oid_fwcode.1_2001
0x40f28b	handler_oid_fwcode.1_2002
0x40f28f	handler_oid_fwcode.1_201d
0x40f293	handler_oid_fwcode.1_2020
0x40f297	handler_oid_fwcode.1_7000
0x40f29b	handler_oid_fwcode.1_7001
0x40f43c	handler_oid_fwcode.1_ranges
0x40f448	handler_oid_fwcode.1_20_to_2f
0x40f48d	handler_oid_fwcode.1_90_to_af_modes
0x40f4c6	handler_oid_fwcode.1_d0_to_d9
0x40f500	handler_oid_fwcode.1_f02_to_f0b
0x40f51a	handler_oid_fwcode.1_f0_to_f9
0x40f54c	handler_oid_fwcode.1_1000_to_1999
0x40f57b	handler_oid_fwcode.1_2003_to_201c
0x40f5b0	handler_oid_fwcode.1_3000_to_3fff
0x40f5e5	handler_oid_fwcode.1_5000_to_5fff
0x40f61b	handler_oid_fwcode.1_4000_to_4fff
0x40f650	handler_oid_fwcode.1_6000_to_6fff
0x40f686	handler_oid_fwcode.1_100_to_107
0x40f69e	handler_oid_fwcode.1_200_to_2ff
0x40f6c1	handler_oid_fwcode.1_300_to_3ff
0x40f6d6	handler_oid_fwcode.1_default
0x40f6d8	end_of_oid_fwcode_handling.1

0x40fcd6	default_on_penstate_handling.1
0x40fce4	end_of_penstate_handling.1

0x41171e	end_of_quiz_state_handling

0x411a24	handler_button_fwcode.8_other
0x411a30	handler_button_fwcode.8_90_to_af_modes

0x41200d	handler_oid_fwcode.8_other_and_ranges
0x4122ec	end_of_oid_fwcode_handling.8

0x41254f	default_on_penstate_handling.8
0x412552	end_of_penstate_handling.8

0x413650	handler_oid_fwcode.2_other_and_ranges
0x413899	end_of_oid_fwcode_handling.2

0x413be9	default_on_penstate_handling.2
0x413bec	end_of_penstate_handling.2

0x4143aa	handler_button_fwcode.9_other
0x4143b6	handler_button_fwcode.9_90_to_af_modes

0x41495a	handler_oid_fwcode.9_other_and_ranges
0x414bc7	end_of_oid_fwcode_handling.9

0x414e25	default_on_penstate_handling.9
0x414e28	end_of_penstate_handling.9

0x4154b7	handler_button_fwcode.3_other
0x4154c3	handler_button_fwcode.3_90_to_af_modes

0x415a1e	handler_oid_fwcode.3_other_and_ranges
0x415c67	end_of_oid_fwcode_handling.3

0x415f72	default_on_penstate_handling.3
0x415f75	end_of_penstate_handling.3

0x4166ed	handler_oid_fwcode.4_other_and_ranges
0x4166e4	handler_oid_fwcode.4_404_to_408

0x416c4b	handler_button_fwcode.4_other
0x416c57	handler_button_fwcode.4_90_to_af_modes

0x417067	default_on_penstate_handling.4
0x41706a	end_of_penstate_handling.4

0x418507	handler_oid_fwcode.c_other_and_ranges
0x418500	handler_oid_fwcode.c_404_to_408

0x418f66	default_on_penstate_handling.c
0x418f69	end_of_penstate_handling.c

0x41ce75	handler_button_fwcode.c_other
0x41ce81	handler_button_fwcode.c_90_to_af_modes

0x40006e	naked_if_p4bit8_then_set_p0bit7

0x40008d	naked_RAM[Ix0,Ix0+1]=R0R1_or_Y0Y1
0x400092	naked_RAM[Ix0,Ix0+1]=X0X1_or_Y0Y1
0x400097	naked_R0R1=R0R1_or_Y0Y1
0x40009a	naked_R0R1=X0X1_or_Y0Y1
0x40009d	naked_RAM[X1,X1+1]=RAM[Ix1,Ix1+1]_or_RAM[Ix0,Ix0+1]
0x4000a0	naked_RAM[Ix0,Ix0+1]=RAM[Ix1,Ix1+1]_or_R1R0
0x4000ae	naked_RAM[Ix0,Ix0+1]=RAM[Ix1,Ix1+1]_or_Y1Y0
0x4000b4	naked_R1R0=RAM[Ix0,Ix0+1]_or_R1R0

0x4000de	naked_RAM[Ix0,Ix0+1]=R0R1_xor_Y0Y1
0x4000e3	naked_RAM[Ix0,Ix0+1]=X0X1_xor_Y0Y1
0x4000e8	naked_R0R1=R0R1_xor_Y0Y1
0x4000eb	naked_R0R1=X0X1_xor_Y0Y1
0x4000ee	naked_RAM[X1,X1+1]=RAM[Ix1,Ix1+1]_xor_RAM[Ix0,Ix0+1]
0x4000f1	naked_RAM[Ix0,Ix0+1]=R1R0_xor_RAM[Ix1,Ix1+1]
0x400111	naked_R1R0=local(X0,X0+1)_xor_Y1Y0
0x40011d	naked_local(X1,X1+1)=R1R0_xor_local(X0,X0+1)
0x400120	naked_local(X1,X1+1)=local(X0,X0+1)_xor_RAM[Ix0,Ix0+1]
0x400123	naked_local(X1,X1+1)=local(X0,X0+1)_xor_local(Y1,Y1+1)

0x420777	main	   
0x286513	SD_AD_ISR	
 
0x006cd0	Usr_T0_ISR	  
0x006911	Usr_P00_ISR       
0x006d0e	Usr_T1_ISR	  
0x006916	Usr_P01_ISR       
0x0068d3	Usr_T2_ISR	  
0x00691b	Usr_P02_ISR       
0x286560	SD_DA_ISR	  
0x006920	Usr_SPI_ISR       
0x006926	Usr_MSP_ISR       
0x00692c	Usr_I2S_ISR       
0x286113	USB_ISR_Function  
0x006c52	Usr_RTC_ISR       
0x006932	Usr_NF_ISR	  
0x006938	Usr_DMA_SD_RW_ISR 
0x006c91	Usr_SAR_AD_ISR    
0x00693e	Usr_DMA_SD2_RW_ISR
0x006943	Usr_DMA_DEV_RW_ISR

	0x0056bb	wbstr_r+
	0x0056c1	wbstr_sd:0:\\updateA.chp
	0x41de31	ascii_version




#ram for rom
0x023f	last_oid_command?


0x3680	file_dirhandle_unk1
0x3681	file_dirhandle_unk2_dw
0x3683	file_dirhandle_unk3_dw
0x3685	file_dirhandle_unk4_dw
0x3687	file_dirhandle_unk5_dw
0x3689	file_dirhandle_unk6_dw
0x368b	file_dirhandle_unk7_dw
0x368d	file_dirhandle_unk8_dw
0x368f	file_dirhandle_unk9
0x3690	file_dirhandle_is_open
0x3691	file_dirhandle_unk10
0x3692	file_dirhandle_unk11

#3 of them? length of dirstruct 0x113
#so up to 39c9
#struct[0] bool = if it's used/opened

0x3d07	ptr_last_sound
#length 3, allocated in 0x3d08 -- 0x3d0a
#3d07[0] = type of sound, determines meaning of the content of 3d08[1-2] as follows:
#  1: OID, but without associated mode. The sound table is restored from book_ctx[d].
#  2: system sound, its id.
#  3: OID, mode 0 sound table (book_mode set to 0 on replay).

0x3da0	battery_warning_flag
0x3da4	book_open_explain_switch
0x3da6	oid_repeat
0x3da7	action_data_2
0x3da9	action_data_1
0x3dab	penstate
0x3dac	inactivity_timer
0x3dad	poweroff_timer
0x3dae	runlevel

0x3db3	fw_config_30200__0168
#time in seconds to auto shutdown
0x3db4	fw_config_30202__0078
#time in seconds before inactivity warning
0x3db5	fw_config_30204__97
0x3db6	fw_config_30207__04
0x3db7	fw_config_30208__ffff
0x3db8	fw_config_3020b__00030400
#location of mp3tbl1
0x3dba	fw_config_3020f__00010105
0x3dbc	fw_config_30213__07020604
0x3dbe	fw_config_30217__09020302
0x3dc0	fw_config_3021b__00000000
0x3dc2	fw_config_302fc__000045f2

0x3dc4	bedtime_timer_counter_10Hz
0x3dc6	bedtime_timer_target
0x3dc8	timer_counter_0.1Hz
0x3dca	last_timer_value_bumped_every_second
0x3dcc	timer_counter_10Hz

0x3dd9	volume
0x3dde	sys_sound_playing_bitset
#for first 0x40 sounds (4 words)
0x3de2	button_tracking_state
0x3de3	button_tracking_time
0x3de4	buttons_locked_till_main_released
0x3de5	is_long_press_staged
0x3de6	button_from_sensor
0x3de7	button_staged
0x3de8	last_seen_button_from_sensor
0x3de9	is_long_press
0x3dea	button
0x3ded	is_oid_module_initialized
0x3dee	oid_from_sensor
0x3dfc	battery_last_value
0x3dfd	battery_incidents_counter
0x3dfe	main_mode_current
0x3dff	main_mode_requested
0x3e01	mp3_speed
0x3e02	da_fu_weng_mode
0x3e04	some_random_seeding
0x3e0d	preloaded_bnl_book_ids
#size = 50 (0x32) words



#hw mapped
0xf100	Reg_DMA_SD_W_ADDR
0xf101	Reg_DMA_SD_W_LEN
0xf102	Reg_DMA_SD_W_CTRL
0xf103	Reg_DMA_SD_R_ADDR
0xf104	Reg_DMA_SD_R_LEN
0xf105	Reg_DMA_SD_R_CTRL

0xf10f	Reg_DMA_HFD_R_ADDR
0xf110	Reg_DMA_HFD_R_LEN
0xf111	Reg_DMA_HFD_R_CTRL

0xf121	Reg_DMA_EXTF_W_ADDR
0xf122	Reg_DMA_EXTF_W_LEN
0xf123	Reg_DMA_EXTF_W_CTRL
0xf124	Reg_DMA_EXTF_R_ADDR
0xf125	Reg_DMA_EXTF_R_LEN
0xf126	Reg_DMA_EXTF_R_CTRL
0xf127	Reg_DMA_EXTF_RW_ADDR_H
0xf128	Reg_DMA_EXTF_RW_ADDR_L

0xf132	Reg_DMA2_WRAM_ADDR
0xf133	Reg_DMA2_LEN
0xf134	Reg_DMA2_CTRL
0xf135	Reg_DMA2_PRAM_ADDR

0xf300	hw_pll_ctrl
0xf301	hw_int
0xf302	hw_fra_l
0xf303	hw_fra_h

0xf800	Reg_SF_CTRL
0xf801	Reg_SF_CMD

0xFE27	Reg_DMA_EXTF_ADDR_H
0xFE28	Reg_DMA_EXTF_ADDR_L
0xFE29	Reg_DMA1_PRAM_ADDR_H
0xFE2A	Reg_DMA1_PRAM_ADDR_L
0xFE2B	Reg_DMA1_LEN
0xFE2C	Reg_DMA1_CTRL

